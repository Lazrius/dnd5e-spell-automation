{"_id":"0kujd3hwd2o957d3","command":"({\r\n\tname: \"Mage Armor\",\r\n\tid: \"0kujd3hwd2o957d3\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\n\r\nconst casterToken = arguments[0].token;\r\nconsole.log(arguments);\r\nconsole.log(args);\r\n\r\n// If source token is not present, then we should have a second set of options where tokenUuid is visible\r\nlet target = args[1].sourceToken;\r\nif (!target) {\r\n\ttarget = await fromUuid(args[1].tokenUuid);\r\n}\r\n\r\nif (args[0] === \"on\") {\r\n\tconst sequence = new Sequence();\r\n\tsequence.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.abjuration\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(2000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.opacity(0.3)\r\n\t\t.filter(\"Glow\", { color: 0xffffff })\r\n\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(200)\r\n\t\t.duration(1200)\r\n\t\t.waitUntilFinished(-500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.shield.02.intro.blue\")\r\n\t\t.opacity(0.4)\r\n\t\t.scale(0.45)\r\n\t\t.atLocation(casterToken)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500);\r\n\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.energy_field.02.above.blue\")\r\n\t\t.attachTo(target)\r\n\t\t.scaleToObject(1.5)\r\n\t\t.opacity(0.3)\r\n\t\t.persist()\r\n\t\t.name(`mage-armor-${target.id}`)\r\n\t\t.fadeIn(1000)\r\n\t\t.fadeOut(1000);\r\n\tawait sequence.play();\r\n}\r\n\r\nelse if (args[0] === \"off\") {\r\n\tSequencer.EffectManager.endEffects({ name: `mage-armor-${casterToken.id}`, object: casterToken });\r\n}\r\n\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Mage Armor","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"0rwene3mw2t755qg","command":"({\r\n\tname: \"Detect Magic\",\r\n\tid: \"0rwene3mw2t755qg\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.divination\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1700)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xffffff })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200)\r\n\t.waitUntilFinished(-500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.detect_magic.circle.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.duration(2500)\r\n\t.randomRotation();\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Detect Magic","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"0v6wjyiesnzkaq4o","command":"({\r\n\tname: \"Barkskin Start\",\r\n\tid: \"0v6wjyiesnzkaq4o\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.transmutation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.opacity(0.3)\r\n\t.filter(\"Glow\", { color: 0x98fb98 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.green\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(500)\r\n\t.duration(1200)\r\n\t.waitUntilFinished(-500);\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Barkskin Start","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"0w4lom70s3ne7a5y","command":"({\r\n\tname: \"Disguise Self\",\r\n\tid: \"0w4lom70s3ne7a5y\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.bubble.outro.rainbow\")\r\n\t.scaleToObject(2)\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.belowTokens();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.illusion\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(2800)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xadd8e6 })\r\n\t.opacity(0.8);\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Disguise Self","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"0wwnyds0953l72o3","command":"({\r\n\tname: \"Twisted Transformation Persist\",\r\n\tid: \"0wwnyds0953l72o3\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nlet tokenD = canvas.tokens.get(args[1].tokenId);\r\n\r\nif(args[0] === \"on\"){\r\n\t// If the dynamic active effect started\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.moonbeam.01.intro.green\")\r\n\t\t.attachTo(tokenD)\r\n\t\t.scale(0.5)\r\n\t\t.belowTokens()\r\n\t\t.waitUntilFinished(-500)\r\n\t\t.opacity(0.5);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.moonbeam.01.loop.green\")\r\n\t\t.attachTo(tokenD)\r\n\t\t.scale(0.5)\r\n\t\t.persist()\r\n\t\t.name(`transformation-${tokenD.id}`)\r\n\t\t.fadeIn(300)\r\n\t\t.fadeOut(300)\r\n\t\t.belowTokens()\r\n\t\t.extraEndDuration(800)\r\n\t\t.opacity(0.5);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.particles.outward.greenyellow.01.02\")\r\n\t\t.attachTo(tokenD)\r\n\t\t.scale(0.5)\r\n\t\t.persist()\r\n\t\t.name(`transformation-particle-${tokenD.id}`)\r\n\t\t.fadeIn(300)\r\n\t\t.fadeOut(300)\r\n\t\t.belowTokens();\r\n\tawait sequence.play();\r\n}\r\n\r\nif(args[0] === \"off\"){\r\n\t// If the dynamic active effect ended\r\n\tSequencer.EffectManager.endEffects({ name: `transformation-${tokenD.id}`, object: tokenD });\r\n\tSequencer.EffectManager.endEffects({ name: `transformation-particle-${tokenD.id}`, object: tokenD });\r\n\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.moonbeam.01.outro.green\")\r\n\t\t.scale(0.5)\r\n\t\t.attachTo(tokenD)\r\n\t\t.belowTokens()\r\n\t\t.opacity(0.5);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.liquid.splash.red\")\r\n\t\t.attachTo(tokenD)\r\n\t\t.belowTokens()\r\n\t\t.scale(0.5);\r\n\tawait sequence.play();\r\n}\r\n\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Twisted Transformation Persist","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"1068svcch6cf0mjv","command":"({\r\n\tname: \"Ray Of Frost\",\r\n\tid: \"1068svcch6cf0mjv\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\nconst casterToken = arguments[0].token;\r\nconsole.log(arguments);\r\nconsole.log(args);\r\n\r\n// If source token is not present, then we should have a second set of options where tokenUuid is visible\r\nlet target = args[1].sourceToken;\r\nif (!target) {\r\n\ttarget = await fromUuid(args[1].tokenUuid);\r\n}\r\n\r\nif(args[0] === \"on\") {\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(2000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scaleToObject(2)\r\n\t\t.filter(\"Glow\", { color: 0x26abff });\r\n\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.energy_strands.complete.blue.01\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.fadeIn(500)\r\n\t\t.duration(2200)\r\n\t\t.fadeOut(500)\r\n\t\t.scaleToObject(2)\r\n\t\t.waitUntilFinished(-500);\r\n\t\t\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.ray_of_frost.blue\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.stretchTo(target);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.token_border.circle.static.blue.001\")\r\n\t\t.delay(2000)\r\n\t\t.attachTo(target)\r\n\t\t.scale(0.5)\r\n\t\t.fadeIn(2000)\r\n\t\t.fadeOut(2000)\r\n\t\t.persist()\r\n\t\t.name(`frost-${target.id}`);\r\n\t\r\n\tawait sequence.play();\r\n}\r\n\r\nelse if (args[0] === \"off\") {\r\n\tSequencer.EffectManager.endEffects({ name: `frost-${casterToken.id}`, object: casterToken });\r\n}\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Ray Of Frost","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"1e50qzk752dh95mo","command":"({\r\n\tname: \"Minor Illusion\",\r\n\tid: \"1e50qzk752dh95mo\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nawait warpgate.spawn(\"Minor Illusion\", {}, {\r\n\tpre: async (location) => {\r\n\t\tconst sequence = new Sequence();\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.illusion\")\r\n\t\t\t.atLocation(casterToken)\r\n\t\t\t.duration(2000)\r\n\t\t\t.fadeIn(500)\r\n\t\t\t.fadeOut(500)\r\n\t\t\t.scale(0.5)\r\n\t\t\t.opacity(0.3)\r\n\t\t\t.filter(\"Glow\", { color: 0xffffbf })\r\n\t\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.moonbeam.01.intro.rainbow\")\r\n\t\t\t.atLocation(casterToken)\r\n\t\t\t.fadeIn(100)\r\n\t\t\t.fadeOut(200)\r\n\t\t\t.duration(1200)\r\n\t\t\t.waitUntilFinished(-500);\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.toll_the_dead.blue.shockwave\")\r\n\t\t\t.atLocation(location)\r\n\t\t\t.fadeIn(500)\r\n\t\t\t.fadeOut(500)\r\n\t\t\t.scale(0.5)\r\n\t\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\r\n\t\tawait sequence.play();\r\n\r\n\t\t// Sleep for 500ms\r\n\t\tawait (new Promise(resolve => setTimeout(resolve, 1200)));\r\n\t}\r\n}, {\r\n\tcollision: false\r\n});\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Minor Illusion","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"1grs4np2971w7apw","command":"({\r\n\tname: \"Beast Bond Persist\",\r\n\tid: \"1grs4np2971w7apw\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\n// This needs to be placed in dae's macro.execute with the @token and @target parameters in order to work correctly.\r\n\r\nconst casterToken = canvas.scene.tokens.get(args[1]);\r\nconst targetActor = canvas.scene.tokens.get(args[2]);\r\n\r\nif(args[0] === \"on\"){\r\n\t// If the dynamic active effect started\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.markers.runes.green02.02\")\r\n\t\t.attachTo(casterToken)\r\n\t\t.scale(0.5)\r\n\t\t.persist()\r\n\t\t.name(`beast-bond-${casterToken.id}`)\r\n\t\t.fadeIn(1000)\r\n\t\t.fadeOut(1000);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.markers.runes.green02.02\")\r\n\t\t.attachTo(targetActor)\r\n\t\t.scale(0.5)\r\n\t\t.persist()\r\n\t\t.name(`beast-bond-${targetActor.id}`)\r\n\t\t.fadeIn(1000)\r\n\t\t.fadeOut(1000);\r\n\tawait sequence.play();\r\n}\r\n\r\nif(args[0] === \"off\"){\r\n\t// If the dynamic active effect ended\r\n\tSequencer.EffectManager.endEffects({ name: `beast-bond-${casterToken.id}`, object: casterToken.id });\r\n\tSequencer.EffectManager.endEffects({ name: `beast-bond-${targetActor.id}`, object: targetActor.id });\r\n}\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Beast Bond Persist","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"247d7ktfu3edwl2p","command":"({\r\n\tname: \"Blade Ward\",\r\n\tid: \"247d7ktfu3edwl2p\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\nconst casterToken = arguments[0].token;\r\n\r\nif (args[0] === \"on\") {\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.abjuration\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(1700)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.filter(\"Glow\", { color: 0xD7E5F0 })\r\n\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.shimmer.01.blue\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(500)\r\n\t\t.duration(1900)\r\n\t\t.scaleToObject(1.5);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.010.blue\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(200);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.token_stage.round.blue.01.01\")\r\n\t\t.attachTo(casterToken)\r\n\t\t.scaleToObject(1.5)\r\n\t\t.persist()\r\n\t\t.name(`blade-ward-${casterToken.id}`)\r\n\t\t.fadeIn(1000)\r\n\t\t.fadeOut(500)\r\n\t\t.opacity(0.8)\r\n\t\t.playbackRate(0.1);\r\n\tawait sequence.play();\r\n}\r\n\r\nif (args[0] === \"off\") {\r\n\tawait Sequencer.EffectManager.endEffects({name: `blade-ward-${casterToken.id}`, object: casterToken});\r\n}\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Blade Ward","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"256ntsuz5w6q4vi5","command":"({\r\n\tname: \"Mind Sliver\",\r\n\tid: \"256ntsuz5w6q4vi5\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.energy_strands.overlay.purple.01\")\r\n\t.delay(200)\r\n\t.fadeIn(300)\r\n\t.fadeOut(500)\r\n\t.duration(3000)\r\n\t.scale(0.4)\r\n\t.atLocation(casterToken)\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\" });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.enchantment\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-2000)\r\n\t.filter(\"Glow\", { color: 0x800080 });\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.moonbeam.01.intro.rainbow\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(200)\r\n\t\t.duration(1200)\r\n\t\t.belowTokens()\r\n\t\t.waitUntilFinished(-500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.delay(500)\r\n\t\t.file(\"jb2a.impact.007.purple\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(200);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.ice_spikes.radial.burst.white\")\r\n\t\t.scale(0.3)\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.duration(1500)\r\n\t\t.opacity(0.5);\r\n}\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Mind Sliver","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"2euew14ibtahxxhe","command":"({\r\n\tname: \"Snare\",\r\n\tid: \"2euew14ibtahxxhe\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nawait warpgate.spawn(\"Snare\", {}, {\r\n\tpre: async (location) => {\r\n\t\tconst seq = new Sequence();\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.abjuration\")\r\n\t\t\t.atLocation(casterToken)\r\n\t\t\t.duration(2000)\r\n\t\t\t.fadeIn(500)\r\n\t\t\t.fadeOut(500)\r\n\t\t\t.scale(0.5)\r\n\t\t\t.opacity(0.3)\r\n\t\t\t.filter(\"Glow\", { color: 0xffffff })\r\n\t\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t\t\t.atLocation(casterToken)\r\n\t\t\t.fadeIn(100)\r\n\t\t\t.fadeOut(200)\r\n\t\t\t.duration(1200)\r\n\t\t\t.waitUntilFinished(-500);\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.toll_the_dead.purple.shockwave\")\r\n\t\t\t.atLocation(location)\r\n\t\t\t.fadeIn(500)\r\n\t\t\t.fadeOut(500)\r\n\t\t\t.scale(0.5)\r\n\t\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\r\n\t\tawait sequence.play();\r\n\r\n\t\t// Sleep for 500ms\r\n\t\tawait (new Promise(resolve => setTimeout(resolve, 1200)));\r\n\t}\r\n}, {\r\n\tcollision: false\r\n});\r\n\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Snare","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"2r318nk15rgzvx15","command":"({\r\n\tname: \"Lesser Restoration\",\r\n\tid: \"2r318nk15rgzvx15\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.simple.abjuration\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.scaleIn(0, 300, { ease: \"easeOutCubic\" })\r\n\t.scaleToObject(4)\r\n\t.duration(1000)\r\n\t.fadeOut(500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.energy_strands.overlay.blue.01\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.scaleToObject(4)\r\n\t.duration(1000)\r\n\t.fadeOut(500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.cure_wounds.400px.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scaleToObject(3)\r\n\t.duration(1500)\r\n\t.waitUntilFinished(-1000);\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.003.blue\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.healing_generic.loop.bluewhite\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scaleToObject(3)\r\n\t\t.belowTokens()\r\n\t\t.opacity(0.5);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.healing_generic.burst.bluewhite\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scaleToObject(3)\r\n\t\t.opacity(0.5);\r\n}\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Lesser Restoration","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"2z3yb4dhf2wvfvay","command":"({\r\n\tname: \"Primal Savagery\",\r\n\tid: \"2z3yb4dhf2wvfvay\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.butterflies.many.red\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.duration(4000)\r\n\t.scale(0.8);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.transmutation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-2000)\r\n\t.filter(\"Glow\", { color: 0xc00000 });\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.003.dark_red\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(100);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.claws.200px.dark_red\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.scaleToObject(1.5)\r\n\t\t.duration(2000)\r\n\t\t.fadeOut(500);\r\n}\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Primal Savagery","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"30uhw51wcm1h6ve7","command":"({\r\n\tname: \"Shatter\",\r\n\tid: \"30uhw51wcm1h6ve7\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nconst template = canvas.templates.placeables[canvas.templates.placeables.length-1];\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-1500)\r\n\t.filter(\"Glow\", { color: 0xafeeee })\r\n\t.opacity(0.8);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.light.intro.blue\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.belowTokens()\r\n\t.fadeOut(500)\r\n\t.duration(1800)\r\n\t.fadeIn(500)\r\n\t.scale(0.7);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.shatter.blue\")\r\n\t.atLocation(template.position);\r\nawait sequence.play();\r\n\r\ncanvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", [template.data._id]);\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Shatter","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"31xbp9n3shtjl5yd","command":"({\r\n\tname: \"Earth Tremor\",\r\n\tid: \"31xbp9n3shtjl5yd\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\n//For use with a 10ft spherical template. Will be off-center if cube is used.\r\nconst template = canvas.templates.placeables[canvas.templates.placeables.length-1];\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xFFA500 })\r\n\t.opacity(0.8)\r\n\t.waitUntilFinished(-1000);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.impact.010.orange\")\r\n\t.atLocation(template.position)\r\n\t.fadeOut(500)\r\n\t.fadeIn(100)\r\n\t.scale(1)\r\n\t.belowTokens();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.impact.ground_crack.orange.01\")\r\n\t.atLocation(template.position)\r\n\t.belowTokens()\r\n\t.fadeOut(1000)\r\n\t.fadeIn(100)\r\n\t.scale(1)\r\n\t.belowTokens()\r\n\t.waitUntilFinished(-2000);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.impact.ground_crack.still_frame.01\")\r\n\t.atLocation(template.position)\r\n\t.belowTokens()\r\n\t.fadeOut(1000)\r\n\t.fadeIn(1000)\r\n\t.scale(1)\r\n\t.belowTokens()\r\n\t.persist()\r\n\t.opacity(0.8)\r\n\t.name(`earth-tremor-diff-terrain-marker`);\r\nawait sequence.play();\r\n\r\ncanvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", [template.data._id]);\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Earth Tremor","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"41m45bft0kwfsvek","command":"({\r\n\tname: \"Thorn Whip\",\r\n\tid: \"41m45bft0kwfsvek\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.transmutation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.opacity(0.3)\r\n\t.filter(\"Glow\", { color: 0x89F423 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.template_circle.symbol.out_flow.drop.dark_green\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.duration(2000)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.opacity(0.5);\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.scorching_ray.green.02\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(800)\r\n\t\t.fadeOut(100)\r\n\t\t.stretchTo(target)\r\n\t\t.waitUntilFinished(-500)\r\n\t\t.opacity(0.7);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.008.green\")\r\n\t\t.atLocation(target)\r\n\t\t.scaleToObject(1.5);\r\n}\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Thorn Whip","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"46zolefofwm6e0h2","command":"({\r\n\tname: \"Poison Spray\",\r\n\tid: \"46zolefofwm6e0h2\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nconst casterToken = arguments[0].token;\r\nconsole.log(arguments);\r\nconsole.log(args);\r\n\r\n// If source token is not present, then we should have a second set of options where tokenUuid is visible\r\nlet target = args[1].sourceToken;\r\nif (!target) {\r\n\ttarget = await fromUuid(args[1].tokenUuid);\r\n}\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.conjuration\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.opacity(0.3)\r\n\t.filter(\"Glow\", { color: 0x89F423 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.green\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200)\r\n\t.waitUntilFinished(-1500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.breath_weapons.acid.line.green\")\r\n\t.atLocation(casterToken)\r\n\t.stretchTo(target);\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Poison Spray","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"5agdxf0xk9j026g1","command":"({\r\n\tname: \"Frostbite\",\r\n\tid: \"5agdxf0xk9j026g1\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(3000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scaleToObject(2)\r\n\t.filter(\"Glow\", { color: 0xd9f1ff });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.shield_themed.above.ice.01.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.duration(3000)\r\n\t.fadeOut(500)\r\n\t.scaleToObject(1.5)\r\n\t.opacity(0.8);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.shield_themed.below.ice.01.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.duration(3000)\r\n\t.fadeOut(500)\r\n\t.scaleToObject(1.5)\r\n\t.opacity(0.8)\r\n\t.waitUntilFinished(-500);\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.inpulse.circle.04.normal\")\r\n\t\t.atLocation(target)\r\n\t\t.duration(3000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scaleToObject(3)\r\n\t\t.filter(\"Glow\", { color: 0xd9f1ff });\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.ice_spikes.radial.burst.white\")\r\n\t\t.atLocation(target)\r\n\t\t.duration(1500)\r\n\t\t.fadeOut(500)\r\n\t\t.scaleToObject(1.5);\r\n}\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Frostbite","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"600nic69qyn59tsx","command":"({\r\n\tname: \"Sanctuary\",\r\n\tid: \"600nic69qyn59tsx\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\nconst casterToken = arguments[0].token;\r\nconsole.log(arguments);\r\nconsole.log(args);\r\n\r\n// If source token is not present, then we should have a second set of options where tokenUuid is visible\r\nlet target = args[1].sourceToken;\r\nif (!target) {\r\n\ttarget = await fromUuid(args[1].tokenUuid);\r\n}\r\n\r\n\r\nif (args[0] === \"on\") {\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.abjuration\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(2000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.opacity(0.3)\r\n\t\t.filter(\"Glow\", { color: 0xa9e9f5 })\r\n\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(200)\r\n\t\t.duration(1200)\r\n\t\t.waitUntilFinished(-500);\r\n\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.energy_field.02.below.blue\")\r\n\t\t.attachTo(target)\r\n\t\t.scale(0.5)\r\n\t\t.persist()\r\n\t\t.name(`sanctuary-${target.id}`)\r\n\t\t.fadeIn(300)\r\n\t\t.fadeOut(3000)\r\n\t\t.opacity(0.7);\r\n\tawait sequence.play();\r\n}\r\n\r\nif (args[0] === \"off\") {\r\n\tSequencer.EffectManager.endEffects({ name: `sanctuary-${casterToken.id}`, object: casterToken });\r\n}\r\n\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Sanctuary","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"6cc07t6sd5gf5003","command":"({\r\n\tname: \"Invoke Duplicity\",\r\n\tid: \"6cc07t6sd5gf5003\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nawait warpgate.spawn(\"Illusory Duplicate\", {}, {\r\n\tpre: async (location) => {\r\n\t\tconst seq = new Sequence();\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.sneak_attack.blue\")\r\n\t\t\t.atLocation(casterToken)\r\n\t\t\t.fadeIn(500)\r\n\t\t\t.fadeOut(500)\r\n\t\t\t.scale(0.5)\r\n\t\t\t.opacity(0.3)\r\n\t\t\t.filter(\"Glow\", { color: 0xa1c4fd })\r\n\t\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t\t\t.atLocation(casterToken)\r\n\t\t\t.fadeIn(100)\r\n\t\t\t.fadeOut(200)\r\n\t\t\t.duration(1200)\r\n\t\t\t.waitUntilFinished(-500);\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.toll_the_dead.blue.shockwave\")\r\n\t\t\t.atLocation(location)\r\n\t\t\t.fadeIn(500)\r\n\t\t\t.fadeOut(500)\r\n\t\t\t.scale(0.5)\r\n\t\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 })\r\n\t\t\t.filter(\"Glow\", { color: 0xa1c4fd });\r\n\r\n\t\tawait sequence.play();\r\n\r\n\t\t// Sleep for 500ms\r\n\t\tawait (new Promise(resolve => setTimeout(resolve, 1200)));\r\n\t}\r\n}, {\r\n\tcollision: false\r\n});\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Invoke Duplicity","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"6j4g0yiwgsm97vfx","command":"({\r\n\tname: \"Second Wind\",\r\n\tid: \"6j4g0yiwgsm97vfx\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.impact.004.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.healing_generic.400px.green\")\r\n\t.fadeIn(100)\r\n\t.fadeOut(100)\r\n\t.scale(0.4, 0.45)\r\n\t.atLocation(casterToken)\r\n\t.randomRotation();\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Second Wind","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"6knc3frtyeparti5","command":"({\r\n\tname: \"Thaumaturgy\",\r\n\tid: \"6knc3frtyeparti5\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.transmutation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1700)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xffa500 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.rainbow\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.impact.yellow.5\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200);\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Thaumaturgy","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"727pblrzb3ft0afm","command":"({\r\n\tname: \"Healing Word\",\r\n\tid: \"727pblrzb3ft0afm\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-500)\r\n\t.filter(\"Glow\", { color: 0xabcdef });\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.004.blue\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.healing_generic.400px.blue\")\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(100)\r\n\t\t.scale(0.4, 0.45)\r\n\t\t.atLocation(target)\r\n\t\t.randomRotation();\r\n}\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Healing Word","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"7foqep89uv4i9cv0","command":"({\r\n\tname: \"Goodberry\",\r\n\tid: \"7foqep89uv4i9cv0\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.transmutation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1700)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.4)\r\n\t.filter(\"Glow\", { color: 0x98fb98 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.green\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.fireflies.many.01.green\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(700)\r\n\t.fadeOut(700)\r\n\t.duration(4000)\r\n\t.scale(0.4);\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Goodberry","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"7gogva0t7qn9omxm","command":"({\r\n\tname: \"Command\",\r\n\tid: \"7gogva0t7qn9omxm\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.enchantment\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-2000)\r\n\t.filter(\"Glow\", { color: 0xc00000 });\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.004.dark_red\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.simple.enchantment\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.scaleIn(0, 300, { ease: \"easeOutCubic\" })\r\n\t\t.scaleToObject(2)\r\n\t\t.duration(2000)\r\n\t\t.fadeOut(500)\r\n\t\t.filter(\"Glow\", { color: 0xc00000 });\r\n}\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Command","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"7s7kzs15mvjt78q9","command":"({\r\n\tname: \"Feather Fall\",\r\n\tid: \"7s7kzs15mvjt78q9\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.rainbow\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(500)\r\n\t.duration(1200);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.transmutation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-500)\r\n\t.filter(\"Glow\", { color: 0xffffbf });\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.007.yellow\")\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(100)\r\n\t\t.scale(0.4, 0.45)\r\n\t\t.atLocation(target)\r\n\t\t.randomRotation();\r\n}\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Feather Fall","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"7ys6ekl5h53m7z5g","command":"({\r\n\tname: \"Prestidigitation\",\r\n\tid: \"7ys6ekl5h53m7z5g\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.transmutation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1700)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xabcdef })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200);\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Prestidigitation","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"7zzvf76h0coaf2ae","command":"({\r\n\tname: \"Remorhaz Cloak\",\r\n\tid: \"7zzvf76h0coaf2ae\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\n//This is for a homebrew item which on hit deals damage back to the attacker\r\n\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nlet target = canvas.tokens.get(args[0].targets[0].id);\r\n//let targetImg = Array.from(game.user.targets)[0].data.img;\r\n\r\nconst sequence = new Sequence();\r\n\r\nSequencerHelpers.Glow(sequence, target);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.flames.01.orange\")\r\n\t.atLocation(target)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.waitUntilFinished();\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Remorhaz Cloak","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"87p459z4hg2fqtor","command":"({\r\n\tname: \"Guidance\",\r\n\tid: \"87p459z4hg2fqtor\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.divination\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1700)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xffffbf })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.rainbow\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200)\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.outpulse.circle.01.slow\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.filter(\"Glow\", { color: 0xffffbf })\r\n\t.opacity(0.8);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.bless.200px.intro.yellow\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.belowTokens()\r\n\t.scaleToObject(2)\r\n\t.opacity(0.4)\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\" })\r\n\t.waitUntilFinished(-500);\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Guidance","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"8ivkfocebfk5p3nb","command":"({\r\n\tname: \"Dispel Magic\",\r\n\tid: \"8ivkfocebfk5p3nb\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.abjuration\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1700)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xffffff })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.rainbow\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200)\r\n\t.waitUntilFinished(-500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.detect_magic.circle.grey\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.duration(2500)\r\n\t.randomRotation();\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Dispel Magic","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"8q9xsvc7ypon6qez","command":"({\r\n\tname: \"Catnap\",\r\n\tid: \"8q9xsvc7ypon6qez\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.enchantment\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1700)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0x98fb98 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.green\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200)\r\n\t.waitUntilFinished(-500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.hunters_mark.pulse.02.green\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-2000)\r\n\t.filter(\"Glow\", { color: 0xfefebe })\r\n\t.opacity(0.5);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.detect_magic.circle.green\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.duration(2500)\r\n\t.scale(0.5)\r\n\t.randomRotation();\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Catnap","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"8qurmqmdrlxp1ec5","command":"({\r\n\tname: \"Spirit Guardians Persist\",\r\n\tid: \"8qurmqmdrlxp1ec5\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nlet targetID = canvas.tokens.get(args[1].tokenId);\r\n\r\nif(args[0] === \"on\"){\r\n\t// If the dynamic active effect started\r\n\r\n\tconst sequence = new Sequence(); \r\n\tsequence\r\n\t\t.effect()\r\n\t\t.delay(2000)\r\n\t\t.file(\"jb2a.fireflies.many.02.red\")\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.4, 0.45)\r\n\t\t.attachTo(targetID)\r\n\t\t.randomRotation()\r\n\t\t.scaleIn(0, 500, {ease: \"easeOutCubic\"})\r\n\t\t.persist()\r\n\t\t.name(`spirit-guardians-${targetID.id}`);\r\n\tawait sequence.play();\r\n\r\n}\r\nif(args[0] === \"off\"){\r\n\t// If the dynamic active effect ended\r\n\tSequencer.EffectManager.endEffects({ name: `spirit-guardians-${targetID.id}`, object: targetID });\r\n}    \r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Spirit Guardians Persist","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"90oixn7cw7jut16f","command":"({\r\n\tname: \"Flame Glaive\",\r\n\tid: \"90oixn7cw7jut16f\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nawait Sequencer.Preloader.preloadForClients(\r\n\t[\"jb2a.glaive.melee.01.orange\",\r\n\t\t\"jb2a.flames.01.orange\"\r\n\t], false);\r\n\r\n//This uses MIDI QOL to check for Hits before playing certain parts\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nlet target = canvas.tokens.get(args[0].targets[0].id);\r\n//midi checking for hit.\r\nlet targetHit = args[0].hitTargets.length === 1;\r\n\r\nconst sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.glaive.melee.01.orange\")\r\n\t.atLocation(casterToken)\r\n\t.stretchTo(target)\r\n\t.filter(\"Glow\", { color: 0xFFC300 })\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.from(target)\r\n\t.duration(1500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.atLocation(target)\r\n\t.filter(\"Glow\", { color: 0xFFC300 })\r\n\t.playIf(targetHit);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.flames.01.orange\")\r\n\t.atLocation(target)\r\n\t.duration(1500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(300)\r\n\t.playIf(targetHit);\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Flame Glaive","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"9gewllswvuhcj66r","command":"({\r\n\tname: \"Beast Sense\",\r\n\tid: \"9gewllswvuhcj66r\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\n// This needs to be placed in dae's macro.execute with the @token and @target parameters in order to work correctly.\r\n\r\n\r\nconst casterToken = canvas.scene.tokens.get(args[1]);\r\nconst targetActor = canvas.scene.tokens.get(args[2]);\r\n\r\nif(args[0] === \"on\"){\r\n\t// If the dynamic active effect started\r\n\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.markers.light.intro.green\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.divination\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(4000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.waitUntilFinished(-1000)\r\n\t\t.filter(\"Glow\", { color: 0x014421 });\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.shatter.green\")\r\n\t\t.delay(200)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(500)\r\n\t\t.duration(1200)\r\n\t\t.scale(0.4)\r\n\t\t.opacity(0.4)\r\n\t\t.atLocation(casterToken);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.hunters_mark.loop.01.green\")\r\n\t\t.attachTo(casterToken)\r\n\t\t.fadeIn(2000)\r\n\t\t.fadeOut(1000)\r\n\t\t.scale(0.5)\r\n\t\t.opacity(0.5)\r\n\t\t.persist()\r\n\t\t.name(`beast-sense-caster-${casterToken.id}`);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.hunters_mark.loop.01.green\")\r\n\t\t.scaleIn(0, 500, {ease: \"easeOutCubic\"})\r\n\t\t.fadeIn(1000)\r\n\t\t.fadeOut(1000)\r\n\t\t.scale(0.5)\r\n\t\t.attachTo(targetActor)\r\n\t\t.persist()\r\n\t\t.opacity(0.5)\r\n\t\t.name(`beast-sense-target-${targetActor.id}`);\r\n\tawait sequence.play();\r\n\r\n}\r\nif(args[0] === \"off\"){\r\n\t// If the dynamic active effect ended\r\n\tSequencer.EffectManager.endEffects({ name: `beast-sense-caster-${casterToken.id}`, object: casterToken.id });\r\n\tSequencer.EffectManager.endEffects({ name: `beast-sense-target-${targetActor.id}`, object: targetActor.id });\r\n\r\n}    \r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Beast Sense","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"9sq2xl0abtbku3c8","command":"({\r\n\tname: \"Enhance Ability\",\r\n\tid: \"9sq2xl0abtbku3c8\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\n\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.light.intro.green\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.transmutation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-2000)\r\n\t.filter(\"Glow\", { color: 0x243FD6 })\r\n\t.opacity(0.5);\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.hunters_mark.loop.02.blue\")\r\n\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\" })\r\n\t\t.fadeOut(500)\r\n\t\t.scaleToObject(1)\r\n\t\t.attachTo(target)\r\n\t\t.opacity(0.5);\r\n}\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Enhance Ability","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"a9ts7siujcrg5ta4","command":"({\r\n\tname: \"Toll The Dead\",\r\n\tid: \"a9ts7siujcrg5ta4\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.impact.004.dark_purple\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.simple.necromancy\")\r\n\t.atLocation(casterToken)\r\n\t.duration(3000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0x3c1361 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\" })\r\n\t.waitUntilFinished(-2000);\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.toll_the_dead.purple.complete\")\r\n\t\t.atLocation(target)\r\n\t\t.scaleIn(0, 500, { ease: \"easeInCubic\" })\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(300);\r\n}\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Toll The Dead","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"afy2bs8dv4fyx6zf","command":"({\r\n\tname: \"Chaos Bolt\",\r\n\tid: \"afy2bs8dv4fyx6zf\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\n\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.opacity(0.5)\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.rainbow\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200)\r\n\t.waitUntilFinished(-500);\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.flaming_sphere.rainbow\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.moveTowards(target, { ease: \"easeInCubic\" })\r\n\t\t.moveSpeed(500)\r\n\t\t.fadeIn(500)\r\n\t\t.duration(1200)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.6)\r\n\t\t.waitUntilFinished(-500)\r\n\t\t.rotateIn(360, 1200);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.004.dark_purple\")\r\n\t\t.atLocation(target);\r\n}\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Chaos Bolt","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"ax1nmxfjfekb3ie9","command":"({\r\n\tname: \"Dragons Breath Active Item\",\r\n\tid: \"ax1nmxfjfekb3ie9\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nconst template = canvas.templates.placeables[canvas.templates.placeables.length - 1];\r\nlet damageType = args[0].item.data.damage.parts[0][1];\r\nlet damageVisualEffect;\r\n\r\nswitch (damageType) {\r\n\tcase \"acid\":\r\n\t\tdamageVisualEffect = \"jb2a.breath_weapons.poison.cone.green\";\r\n\t\tbreak;\r\n\tcase \"cold\":\r\n\t\tdamageVisualEffect = \"jb2a.breath_weapons.cold.cone.blue\";\r\n\t\tbreak;\r\n\tcase \"fire\":\r\n\t\tdamageVisualEffect = \"jb2a.breath_weapons.fire.cone.orange.01\";\r\n\t\tbreak;\r\n\tcase \"lightning\":\r\n\t\tdamageVisualEffect = \"jb2a.breath_weapons.lightning.line.blue\";\r\n\t\tbreak;\r\n\tcase \"poison\":\r\n\t\tdamageVisualEffect = \"jb2a.breath_weapons.poison.cone.purple\";\r\n\t\tbreak;\r\n\tdefault:\r\n\t\tdamageVisualEffect = \"jb2a.breath_weapons.fire.cone.orange.01\";\r\n\t\tbreak;\r\n}\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(damageVisualEffect)\r\n\t.atLocation(template, { cacheLocation: true })\r\n\t.stretchTo(template, { cacheLocation: true });\r\nawait sequence.play();\r\n\r\ncanvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", [template.data._id]);\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Dragons Breath Active Item","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"bcee3p2okqt5hb4v","command":"({\r\n\tname: \"Longstrider\",\r\n\tid: \"bcee3p2okqt5hb4v\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.transmutation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1700)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xffa500 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.007.orange\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.007.orange\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.file(\"jb2a.token_border.circle.spinning.orange.008\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.scaleToObject(2, 2.2)\r\n\t\t.duration(5000)\r\n\t\t.fadeOut(1000)\r\n\t\t.belowTokens()\r\n\t\t.randomRotation();\r\n}\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Longstrider","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"c800tyovswoytfje","command":"({\r\n\tname: \"Heroism\",\r\n\tid: \"c800tyovswoytfje\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nlet target = canvas.tokens.get(args[0].targets[0].id);\r\nlet targetImg = Array.from(game.user.targets)[0].data.img;\r\n\r\nconst sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.enchantment\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.light.loop.blue\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.swirling_sparkles.01.blue\")\r\n\t.atLocation(target)\r\n\t.waitUntilFinished(-250);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(targetImg)\r\n\t.fadeOut(500)\r\n\t.atLocation(target)\r\n\t.scaleIn(0, 500, { ease: \"easeInCubic\", delay: 0 })\r\n\t.scaleToObject(3)\r\n\t.waitUntilFinished(-250);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(targetImg)\r\n\t.fadeOut(500)\r\n\t.atLocation(target)\r\n\t.scaleIn(0, 500, { ease: \"easeInCubic\", delay: 0 })\r\n\t.scaleToObject(3)\r\n\t.waitUntilFinished(-250);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.ward.star.yellow.02\")\r\n\t.atLocation(target)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scaleToObject(2.5)\r\n\t.persist()\r\n\t.belowTokens();\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Heroism","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"cmg0jtbfdwa0ugfi","command":"({\r\n\tname: \"Booming Blade\",\r\n\tid: \"cmg0jtbfdwa0ugfi\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\n\r\nconst casterToken = arguments[0].token;\r\nconsole.log(arguments);\r\nconsole.log(args);\r\n\r\n// If source token is not present, then we should have a second set of options where tokenUuid is visible\r\nlet target = args[1].sourceToken;\r\nif (!target) {\r\n\ttarget = await fromUuid(args[1].tokenUuid);\r\n}\r\n\r\nif (args[0] === \"on\") {\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.static_electricity.02.blue\")\r\n\t\t.scale(0.4)\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(4000)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(100);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(2000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.waitUntilFinished(-1200)\r\n\t\t.filter(\"Glow\", { color: 0xadd8e6 })\r\n\t\t.opacity(0.8);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.rapier.melee.01.blue.1\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.stretchTo(target)\r\n\t//.missed(args[0].hitTargets.length === 0)\r\n\t\t.waitUntilFinished(-1000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(1500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.static_electricity.01.blue\")\r\n\t\t.scale(0.4)\r\n\t\t.attachTo(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(1000)\r\n\t\t.name(`booming-blade-${target.id}`)\r\n\t\t.persist();\r\n\tawait sequence.play();\r\n\r\n}\r\n\r\nelse if (args[0] === \"off\") {\r\n// If the dynamic active effect ended\r\n\tSequencer.EffectManager.endEffects({ name: `booming-blade-${target.id}`, object: target.id });\r\n}\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Booming Blade","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"coszx5yd58jrmiyh","command":"({\r\n\tname: \"Bless\",\r\n\tid: \"coszx5yd58jrmiyh\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\nconst casterToken = arguments[0].token;\r\nconsole.log(arguments);\r\nconsole.log(args);\r\n\r\n// If source token is not present, then we should have a second set of options where tokenUuid is visible\r\nlet target = args[1].sourceToken;\r\nif (!target) {\r\n\ttarget = await fromUuid(args[1].tokenUuid);\r\n}\r\n\r\nif(args[0] === \"on\") {\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.enchantment\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(4000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.waitUntilFinished(-2000)\r\n\t\t.filter(\"Glow\", { color: 0xfefebe })\r\n\t\t.opacity(0.5);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.outpulse.circle.01.slow\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.filter(\"Glow\", { color: 0xfefebe });\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.bless.200px.intro.yellow\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(100)\r\n\t\t.belowTokens()\r\n\t\t.scaleToObject(2)\r\n\t\t.scaleIn(0, 500, {ease: \"easeOutCubic\"})\r\n\t\t.waitUntilFinished(-500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.bless.200px.loop.yellow\")\r\n\t\t.fadeOut(500)\r\n\t\t.scaleToObject(2)\r\n\t\t.attachTo(target)\r\n\t\t.persist()\r\n\t\t.belowTokens()\r\n\t\t.name(`bless-${target.id}`);\r\n\tawait sequence.play();\r\n\r\n}\r\n\t\r\nelse if (args[0] === \"off\") {\r\n\tSequencer.EffectManager.endEffects({ name: `bless-${casterToken.id}`, object: casterToken });\r\n} \r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Bless","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"crb622c23egc4418","command":"({\r\n\tname: \"Comprehend Languages\",\r\n\tid: \"crb622c23egc4418\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.divination\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1700)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xabcdef })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200)\r\n\t.waitUntilFinished(-500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.detect_magic.circle.grey\")\r\n\t.scale(0.45)\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.duration(1000)\r\n\t.randomRotation();\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Comprehend Languages","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"cznmg4z1r78a5k5a","command":"({\r\n\tname: \"Knock\",\r\n\tid: \"cznmg4z1r78a5k5a\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.energy_strands.overlay.purple.01\")\r\n\t.delay(200)\r\n\t.fadeIn(300)\r\n\t.fadeOut(500)\r\n\t.duration(3000)\r\n\t.scale(0.4)\r\n\t.atLocation(casterToken)\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\" });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.transmutation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-2000)\r\n\t.filter(\"Glow\", { color: 0x800080 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.rainbow\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200)\r\n\t.belowTokens()\r\n\t.waitUntilFinished(-500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.detect_magic.circle.purple\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.randomRotation();\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Knock","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"d7fblb0c9reqcn04","command":"({\r\n\tname: \"Shield Of Faith\",\r\n\tid: \"d7fblb0c9reqcn04\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\n\r\nconst casterToken = arguments[0].token;\r\n\r\nif(args[0] === \"on\") {\r\n\tconst sequence = new Sequence();\r\n\tsequence.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.abjuration\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(2000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.opacity(0.3)\r\n\t\t.filter(\"Glow\", { color: 0xffffff })\r\n\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.moonbeam.01.intro.rainbow\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(200)\r\n\t\t.duration(1200)\r\n\t\t.waitUntilFinished(-500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.shield.02.intro.yellow\")\r\n\t\t.attachTo(casterToken)\r\n\t\t.scale(0.5)\r\n\t\t.waitUntilFinished(-500)\r\n\t\t.opacity(0.7);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.shield.02.loop.yellow\")\r\n\t\t.attachTo(casterToken)\r\n\t\t.scale(0.5)\r\n\t\t.persist()\r\n\t\t.name(`shield-of-faith-${casterToken.id}`)\r\n\t\t.fadeIn(300)\r\n\t\t.fadeOut(300)\r\n\t\t.extraEndDuration(800)\r\n\t\t.opacity(0.7);\r\n\tawait sequence.play();\r\n}\r\n\r\nif(args[0] === \"off\") {\r\n\tSequencer.EffectManager.endEffects({ name: `shield-of-faith-${casterToken.id}`, object: casterToken });\r\n\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.shield.02.outro_explode.yellow\")\r\n\t\t.scale(0.5)\r\n\t\t.attachTo(casterToken)\r\n\t\t.opacity(0.7);\r\n\tawait sequence.play();\r\n}\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Shield Of Faith","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"eghwuhzjoc4qfjgc","command":"({\r\n\tname: \"Fireball\",\r\n\tid: \"eghwuhzjoc4qfjgc\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\n//get the template id from the canvas and its positions.\r\nlet fireTemplate = canvas.templates.get(args[0].templateId);\r\nlet templatePosition = fireTemplate.position;\r\n//get an array of the targets within the tempalte area.\r\nconst targetLocations = Array.from(game.user.targets);\r\n\r\nawait fireTemplate.document.delete();\r\n\r\nlet sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.evocation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0x6a0dad })\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.fireball.beam.purple\")\r\n\t.atLocation(casterToken)\r\n\t.stretchTo(templatePosition)\r\n\t.waitUntilFinished(-1000);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.fireball.explosion.purple\")\r\n\t.atLocation(templatePosition)\r\n\t.waitUntilFinished(-2100);\r\n\r\n//blast mark from the forgotten adventures site, you need to find your own blast mark or use the agreed one by JB2A and FA\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.ground_cracks.purple.01\")\r\n\t.atLocation(templatePosition)\r\n\t.scale(1)\r\n\t.fadeIn(300)\r\n\t.duration(10000)\r\n\t.fadeOut(500)\r\n\t.belowTokens();\r\n\r\nfor (let targetLoc of targetLocations) {\r\n\tSequencerHelpers.Glow(sequence, target, 0x6a0dad);\r\n\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.flames.01.purple\")\r\n\t\t.filter(\"Glow\", { color: 0x6a0dad })\r\n\t\t.atLocation(targetLoc)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.duration(2000);\r\n}\r\n\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Fireball","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"elq0qzuad557kd4x","command":"({\r\n\tname: \"Thunderwave\",\r\n\tid: \"elq0qzuad557kd4x\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nconst template = canvas.templates.placeables[canvas.templates.placeables.length-1];\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0x5e899e })\r\n\t.opacity(0.8)\r\n\t.waitUntilFinished(-1000);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.static_electricity.02.blue\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.belowTokens()\r\n\t.fadeOut(500)\r\n\t.duration(1800)\r\n\t.fadeIn(500)\r\n\t.scale(0.7);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.call_lightning.low_res.blueorange\")\r\n\t.atLocation(template.position)\r\n\t.duration(1500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.opacity(0.5)\r\n\t.scale(0.3)\r\n\t.offset({ x: -150, y: -150 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.thunderwave.center.blue\")\r\n\t.atLocation(template.position)\r\n\t.offset({ x: -150, y: -150 });\r\nawait sequence.play();\r\n\r\ncanvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", [template.data._id]);\r\n\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Thunderwave","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"en7m2p701ggmz7n1","command":"({\r\n\tname: \"Barkskin Persist\",\r\n\tid: \"en7m2p701ggmz7n1\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nlet tokenD = canvas.tokens.get(args[1].tokenId);\r\n\r\nif(args[0] === \"on\"){\r\n\t// If the dynamic active effect started\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.shield.01.intro.green\")\r\n\t\t.attachTo(tokenD)\r\n\t\t.scale(0.5)\r\n\t\t.waitUntilFinished(-500)\r\n\t\t.opacity(0.3);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.fireflies.few.02.green\")\r\n\t\t.attachTo(tokenD)\r\n\t\t.scale(0.5)\r\n\t\t.persist()\r\n\t\t.name(`barkskin-1-${tokenD.id}`)\r\n\t\t.fadeIn(2000)\r\n\t\t.fadeOut(2000);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.shield.01.loop.green\")\r\n\t\t.attachTo(tokenD)\r\n\t\t.scale(0.5)\r\n\t\t.persist()\r\n\t\t.name(`barkskin-2-${tokenD.id}`)\r\n\t\t.fadeIn(300)\r\n\t\t.fadeOut(300)\r\n\t\t.extraEndDuration(800)\r\n\t\t.opacity(0.3);\r\n\tawait sequence.play();\r\n}\r\n\r\nif(args[0] === \"off\"){\r\n\t// If the dynamic active effect ended\r\n\tSequencer.EffectManager.endEffects({ name: `barkskin-1-${tokenD.id}`, object: tokenD });\r\n\tSequencer.EffectManager.endEffects({ name: `barkskin-2-${tokenD.id}`, object: tokenD });\r\n\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.shield.01.outro_explode.green\")\r\n\t\t.scale(0.5)\r\n\t\t.opacity(0.3)\r\n\t\t.attachTo(tokenD);\r\n\tawait sequence.play();\r\n}\r\n\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Barkskin Persist","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"enqet3nuifdp8h9o","command":"({\r\n\tname: \"Speak With Animals\",\r\n\tid: \"enqet3nuifdp8h9o\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.divination\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-2000)\r\n\t.filter(\"Glow\", { color: 0x014421 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.green\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.belowTokens()\r\n\t.scaleToObject(1.5)\r\n\t.animateProperty(\"spriteContainer\", \"rotation\", { from: 0, to: 360, duration: 5000, delay: 0 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.shatter.green\")\r\n\t.delay(200)\r\n\t.fadeIn(100)\r\n\t.fadeOut(500)\r\n\t.duration(1200)\r\n\t.scale(0.4)\r\n\t.opacity(0.4)\r\n\t.atLocation(casterToken);\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Speak With Animals","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"erfzkt4tm4ju9z8i","command":"({\r\n\tname: \"Pass Without Trace\",\r\n\tid: \"erfzkt4tm4ju9z8i\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.abjuration\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0x5b0a91 })\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.light.intro.blue\")\r\n\t.duration(1500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.7);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.border.circle.outpulse.01.normal\")\r\n\t.attachTo(casterToken)\r\n\t.fadeIn(500)\r\n\t.filter(\"Glow\", { color: 0x431c53 })\r\n\t.fadeOut(500)\r\n\t.scale(2.5)\r\n\t.opacity(0.3)\r\n\t.belowTokens()\r\n\t.persist();\r\n\r\nawait sequence.play();\r\n\r\ncanvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", [template.data._id]);\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Pass Without Trace","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"esvco2y5dw4tv3g5","command":"({\r\n\tname: \"Hex\",\r\n\tid: \"esvco2y5dw4tv3g5\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\nconst casterToken = arguments[0].token;\r\nconsole.log(arguments);\r\nconsole.log(args);\r\n\r\n// If source token is not present, then we should have a second set of options where tokenUuid is visible\r\nlet target = args[1].sourceToken;\r\nif (!target) {\r\n\ttarget = await fromUuid(args[1].tokenUuid);\r\n}\r\n\r\n\r\nif(args[0] === \"on\") {\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.enchantment\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(4000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.waitUntilFinished(-2000)\r\n\t\t.filter(\"Glow\", { color: 0xcd5c5c });\r\n\t\t\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.dark_red.2\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.delay(2000);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.smoke.puff.centered.dark_black.1\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.delay(2300);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.delay(2000)\r\n\t\t.file(\"jb2a.token_stage.round.red.01.04\")\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.4, 0.45)\r\n\t\t.attachTo(target)\r\n\t\t.randomRotation()\r\n\t\t.scaleIn(0, 500, {ease: \"easeOutCubic\"})\r\n\t\t.persist()\r\n\t\t.name(`hex-${target.id}`);\r\n\t\r\n\tawait sequence.play();\r\n}\r\n\r\nelse if (args[0] === \"off\") {\r\n\tSequencer.EffectManager.endEffects({ name: `hex-${casterToken.id}`, object: casterToken });\r\n}    \r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Hex","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"f3e8yyl915d5effa","command":"({\r\n\tname: \"Ensnaring Strike\",\r\n\tid: \"f3e8yyl915d5effa\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nconst casterToken = canvas.tokens.get(args[0].tokenId);\r\nlet target = Array.from(game.user.targets)[0];\r\nlet distance = canvas.grid.measureDistance(casterToken, target);\r\nlet newSequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.simple.conjuration\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1700)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xaaff00 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 })\r\n\t.opacity(0.5);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.shatter.green\")\r\n\t.delay(200)\r\n\t.fadeIn(100)\r\n\t.fadeOut(500)\r\n\t.duration(1200)\r\n\t.scale(0.4)\r\n\t.atLocation(casterToken);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.fireflies.few.02.green\")\r\n\t.attachTo(casterToken)\r\n\t.scale(0.5)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.arrow.physical.green\")\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.atLocation(casterToken)\r\n\t.stretchTo(target)\r\n\t.waitUntilFinished(-300)\r\n\t.playIf(() => {\r\n\t\treturn distance > 8;\r\n\t});\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.dagger.melee.02.green\")\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.atLocation(casterToken)\r\n\t.stretchTo(target)\r\n\t.waitUntilFinished(-1300)\r\n\t.playIf(() => {\r\n\t\treturn distance < 8;\r\n\t});\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.entangle.green\")\r\n\t.attachTo(target)\r\n\t.scaleToObject(2)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.opacity(0.5)\r\n\t.belowTokens();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.impact.004.green\")\r\n\t.attachTo(target)\r\n\t.fadeIn(100)\r\n\t.fadeOut(100);\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Ensnaring Strike","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"gglmo7zdamg4cxov","command":"({\r\n\tname: \"Rage\",\r\n\tid: \"gglmo7zdamg4cxov\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nawait Sequencer.Preloader.preloadForClients(\r\n\t\"jb2a.markers.02.pink\",\r\n\t\"jb2a.impact.purple.1\",\r\n\t\"jb2a.impact.011.dark_purple\",\r\n\t\"jb2a.energy_strands.complete.dark_red.01\");\r\n\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.02.pink\")\r\n\t.atLocation(casterToken)\r\n\t.duration(3000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.75)\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.impact.purple.1\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.waitUntilFinished(-500)\r\n\t.scale(0.75);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.impact.011.dark_purple\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.75)\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.energy_strands.complete.dark_red.01\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scaleToObject(2)\r\n\t.persist();\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Rage","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"hgf6pvrzgn6cgo4b","command":"({\r\n\tname: \"Eldritch Blast\",\r\n\tid: \"hgf6pvrzgn6cgo4b\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xff0000 })\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.energy_strands.complete.dark_red.01\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5);\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.eldritch_blast.dark_red\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.stretchTo(target);\r\n\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.static_electricity.02.red\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.delay(1000)\r\n\t\t.scaleToObject();\r\n}\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Eldritch Blast","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"iegxhdcsbehany6b","command":"({\r\n\tname: \"Sending\",\r\n\tid: \"iegxhdcsbehany6b\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.impact.003.dark_red\")\r\n\t.scaleToObject(2)\r\n\t.atLocation(casterToken);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.runes.dark_red.01\")\r\n\t.scaleToObject(2)\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.duration(2800)\r\n\t.fadeOut(500)\r\n\t.opacity(0.8);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(2800)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xc00000 })\r\n\t.opacity(0.8);\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Sending","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"ioo32zkvyhcwzpd9","command":"({\r\n\tname: \"Erupting Earth\",\r\n\tid: \"ioo32zkvyhcwzpd9\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nconst template = canvas.templates.placeables[canvas.templates.placeables.length-1];\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.energy_strands.overlay.orange.01\")\r\n\t.fadeIn(300)\r\n\t.fadeOut(500)\r\n\t.duration(1500)\r\n\t.scale(0.4)\r\n\t.atLocation(args[0].tokenId)\r\n\t.scaleIn(0, 500, {ease: \"easeOutCubic\"});    \r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.transmutation\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-500)\r\n\t.filter(\"Glow\", { color: 0xffa500 })\r\n\t.opacity(0.8);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.light.intro.yellow\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.belowTokens()\r\n\t.fadeOut(500)\r\n\t.duration(1800)\r\n\t.fadeIn(500)\r\n\t.scale(0.7);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.outpulse.circle.02.normal\")\r\n\t.atLocation(template.position)\r\n\t.filter(\"Glow\", { color: 0xffa500 })\r\n\t.offset({ x: -140, y: -140 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.impact.ground_crack.01.orange\")\r\n\t.atLocation(template.position)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.offset({ x: -140, y: -140 })\r\n\t.scale(0.8)\r\n\t.belowTokens()\r\n\t.waitUntilFinished(-4900);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.ground_cracks.01.orange\")\r\n\t.atLocation(template.position)\r\n\t.fadeIn(100)\r\n\t.fadeOut(1000)\r\n\t.persist()\r\n\t.scale(0.8)\r\n\t.offset({ x: -140, y: -140 })\r\n\t.belowTokens();\r\nawait sequence.play();\r\n\r\ncanvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", [template.data._id]);\r\n\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Erupting Earth","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"ittk3frl1doqfzv7","command":"({\r\n    name: \"Dragons Breath\",\r\n    id: \"ittk3frl1doqfzv7\",\r\n    spellType: \"range\"\r\n});\r\n// @endmeta\r\n\r\n// This needs to be placed in dae's macro.execute with the @spellLevel, @target and @token parameters in order to work correctly.\r\n//Get the caster and target token IDs\r\nconst casterToken = canvas.scene.tokens.get(args[3]);\r\nconst targetActor = canvas.scene.tokens.get(args[2]);\r\n\r\n// Set the name and DC of the cantrip to be created on the target\r\nconst spellName = \"Dragon's Breath (Active)\";\r\nconst spellDC = casterToken.actor.data.data.attributes.spelldc;\r\n\r\n// When the effect is toggled on:\r\nif (args[0] === \"on\") {\r\n\t// Create the damage type selection dialogue\r\n\tlet d = new Dialog({\r\n\t\ttitle: \"Dragon's Breath\",\r\n\t\tcontent: `\r\n\t\t<p>Please choose a damage type from the drop-down menu:</p>\r\n\t\t<form>\r\n\t\t\t<div>\r\n\t\t\t\t<select id=\"formDamageType\">\r\n\t\t\t\t\t<option value=\"acid\" selected=\"selected\">Acid</option>\r\n\t\t\t\t\t<option value=\"cold\">Cold</option>\r\n\t\t\t\t\t<option value=\"fire\">Fire</option>\r\n\t\t\t\t\t<option value=\"lightning\">Lightning</option>\r\n\t\t\t\t\t<option value=\"poison\">Poison</option>\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t\t`,\r\n\t\tbuttons: {\r\n\t\t\tone: {\r\n\t\t\t\ticon: '<i class=\"fas fa-check\"></i>',\r\n\t\t\t\tlabel: \"Cast\",\r\n\t\t\t\tcallback: () => triggerEffect($(\"#formDamageType\").val()),\r\n\t\t\t},\r\n\t\t\ttwo: {\r\n\t\t\t\ticon: '<i class=\"fas fa-times\"></i>',\r\n\t\t\t\tlabel: \"Cancel\",\r\n\t\t\t}\r\n\t\t},\r\n\t\tdefault: \"Cast\",\r\n\t});\r\n\td.render(true);\r\n\tconst triggerEffect = async (damageType) => {\r\n\t\t// Grabs spellLevel from args passed in at macro.execute\r\n\t\tconst spellLevel = args[args.length - 1].efData.flags.dae.itemData.data.level;\r\n\t\t// Ensure that if the macro args were not passed in, the spell level is cast at the default\r\n\t\tconst upcastLevel = typeof args[1] === \"number\" ? args[1] : spellLevel;\r\n\t\t// Calculates the number of dice to add\r\n\t\tconst dice = upcastLevel - spellLevel + 3;\r\n\t\t// Create the cantrip on the target actor's sheet\r\n\t\tconst item = await targetActor.actor.createEmbeddedDocuments('Item', [{\r\n\t\t\tname: spellName,\r\n\t\t\ttype: \"spell\",\r\n\t\t\timg: \"icons/creatures/abilities/dragon-fire-breath-orange.webp\",\r\n\t\t\tdata: {\r\n\t\t\t\tdescription: {\r\n\t\t\t\t\tvalue: \"<div class=\\\"rd__b  rd__b--3\\\"><p>You spew magical energy from your mouth. You may use an action to exhale energy of the type chosen by the caster in a 15-foot cone. Each creature in that area must make a Dexterity saving throw against the caster's spell DC, taking [[/r 3d6]] damage of the chosen type on a failed save, or half as much damage on a successful one.</p><div class=\\\"rd__spc-inline-post\\\"></div></div><div class=\\\"rd__b  rd__b--3\\\"><div class=\\\"rd__b  rd__b--3\\\"><span class=\\\"rd__h rd__h--3\\\" data-title-index=\\\"5947\\\"> <span class=\\\"entry-title-inner help-subtle\\\">At Higher Levels.</span></span> <p>When this spell is cast using a spell slot of 3rd level or higher, the damage increases by [[/r 1d6]] for each slot level above 2nd.</p><div class=\\\"rd__spc-inline-post\\\"></div></div><div class=\\\"rd__spc-inline-post\\\"></div></div>\",\r\n\t\t\t\t},\r\n\t\t\t\tactivation: {\r\n\t\t\t\t\ttype: \"action\",\r\n\t\t\t\t\tcost: 1\r\n\t\t\t\t},\r\n\t\t\t\ttarget: {\r\n\t\t\t\t\tvalue: 15,\r\n\t\t\t\t\tunits: \"ft\",\r\n\t\t\t\t\ttype: \"cone\"\r\n\t\t\t\t},\r\n\t\t\t\tdamage: {\r\n\t\t\t\t\tparts: [\r\n\t\t\t\t\t\t[dice + \"d6\", damageType]\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\tsave: {\r\n\t\t\t\t\tability: \"dex\",\r\n\t\t\t\t\tdc: spellDC,\r\n\t\t\t\t\tscaling: \"flat\"\r\n\t\t\t\t},\r\n\t\t\t\tlevel: 0,\r\n\t\t\t\tschool: \"trs\",\r\n\t\t\t\tactionType: \"save\",\r\n\t\t\t\tsource: \"XGE\",\r\n\t\t\t},\r\n\t\t\tflags: {\r\n\t\t\t\t\"midi-qol\": {\r\n\t\t\t\t\tonUseMacroName: \"dragons-breath-active-item\",\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}]);\r\n\t\t// Play the casting effect on the caster and the target\r\n\t\tnew Sequence()\r\nsequence\r\n\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.transmutation\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(1000)\r\n\t\t.fadeIn(300)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.opacity(0.3)\r\n\t\t.filter(\"Glow\", {color: 0xffa500})\r\n\t\t.scaleIn(0, 500, {ease: \"easeOutCubic\",delay: 100})\r\nsequence\r\n\t.effect()\r\n\t\t.file(\"jb2a.impact.004.orange\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.belowTokens()\r\n\t\t.waitUntilFinished(-500)\r\nsequence\r\n\t.effect()\r\n\t\t.file(\"jb2a.markers.light.intro.yellow\")\r\n\t\t.attachTo(targetActor)\r\n\t\t.scaleToObject(1.5)\r\n\t\t.waitUntilFinished(-500)\r\n\t\t.belowTokens()\r\nsequence\r\n\t.effect()\r\n\t\t.file(\"jb2a.markers.light.loop.yellow\")\r\n\t\t.attachTo(targetActor)\r\n\t\t.scale(0.5)\r\n\t\t.persist()\r\n\t\t.name(`dragons-breath-${targetActor.id}`)\r\n\t\t.fadeIn(300)\r\n\t\t.fadeOut(300)\r\n\t\t.extraEndDuration(800)\r\n\t\t.belowTokens()\r\nawait sequence.play()\r\n\t}\r\n}\r\n// When the effect is toggled off:\r\nif (args[0] === \"off\") {\r\n\tlet item = targetActor.actor.data.items.find(i => i.name === spellName);\r\n\tif (!item)\r\n\t\treturn;\r\n\t// Remove the cantrip from the target's sheet when the effect ends\r\n\tconsole.log(item);\r\n\ttargetActor.actor.deleteEmbeddedDocuments('Item', [item.id]);\r\n\t// End the sequencer effect attached to the target\r\n\tSequencer.EffectManager.endEffects({\r\n\t\tname: `dragons-breath-${targetActor.id}`,\r\n\t\tobject: targetActor.id\r\n\t});\r\n}\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Dragons Breath","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"itulij3wp969a1yq","command":"({\r\n\tname: \"Mirror Image\",\r\n\tid: \"itulij3wp969a1yq\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\n\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nlet target = canvas.tokens.get(args[1]);\r\nlet targetImg = target.data.img;\r\nif (args[0] === \"on\") {\r\n\t// If the dynamic active effect started\r\n\tconst positions = [{\r\n\t\tx: [],\r\n\t\ty: []\r\n\t},\r\n\t{\r\n\t\tx: [],\r\n\t\ty: []\r\n\t},\r\n\t{\r\n\t\tx: [],\r\n\t\ty: []\r\n\t},\r\n\t];\r\n\tconst pi = 3.1415926535;\r\n\tfor (let i = 0; i < 360; i += 3) {\r\n\t\tlet angle = i;\r\n\t\tlet x1 = 40 * Math.cos(angle * (pi / 180));\r\n\t\tlet y1 = 40 * Math.sin(angle * (pi / 180));\r\n\t\tpositions[0].x.push(x1);\r\n\t\tpositions[0].y.push(y1);\r\n\t}\r\n\tfor (let i = 0; i < 360; i += 3) {\r\n\t\tlet angle = i;\r\n\t\tlet x1 = -40 * Math.cos(angle * (pi / 180));\r\n\t\tlet y1 = -40 * Math.sin(angle * (pi / 180));\r\n\t\tpositions[2].x.push(x1);\r\n\t\tpositions[2].y.push(y1);\r\n\t}\r\n\tpositions[1].x = positions[0].x.slice().reverse();\r\n\tpositions[1].y = positions[0].y.slice().reverse();\r\n\r\n\tconst seq = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.004.dark_purple\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.fadeIn(500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.simple.illusion\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(2000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.filter(\"Glow\", {\r\n\t\t\tcolor: 0x3c1361\r\n\t\t})\r\n\t\t.scaleIn(0, 500, {\r\n\t\t\tease: \"easeOutCubic\"\r\n\t\t})\r\n\t\t.waitUntilFinished(-1000);\r\n\tseq.animation()\r\n\t\t.on(casterToken)\r\n\t\t.fadeOut(1000);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(targetImg)\r\n\t\t.fadeIn(1000)\r\n\t\t.fadeOut(1000)\r\n\t\t.attachTo(target)\r\n\t\t.loopProperty(\"sprite\", \"position.x\", {\r\n\t\t\tvalues: positions[0].x,\r\n\t\t\tduration: 24,\r\n\t\t\tpingPong: false,\r\n\t\t})\r\n\t\t.loopProperty(\"sprite\", \"position.y\", {\r\n\t\t\tvalues: positions[0].y,\r\n\t\t\tduration: 24,\r\n\t\t\tpingPong: false,\r\n\t\t})\r\n\t\t.persist()\r\n\t\t.scaleToObject(1)\r\n\t\t.opacity(0.5)\r\n\t\t.name(`mirror-image-1-${target.id}`);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(targetImg)\r\n\t\t.fadeIn(1000)\r\n\t\t.fadeOut(1000)\r\n\t\t.delay(500)\r\n\t\t.attachTo(target)\r\n\t\t.loopProperty(\"sprite\", \"position.x\", {\r\n\t\t\tvalues: positions[1].x,\r\n\t\t\tduration: 24,\r\n\t\t\tpingPong: true,\r\n\t\t})\r\n\t\t.loopProperty(\"sprite\", \"position.y\", {\r\n\t\t\tvalues: positions[1].y,\r\n\t\t\tduration: 24,\r\n\t\t\tpingPong: true,\r\n\t\t})\r\n\t\t.persist()\r\n\t\t.scaleToObject(1)\r\n\t\t.opacity(0.5)\r\n\t\t.name(`mirror-image-2-${target.id}`);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(targetImg)\r\n\t\t.fadeIn(1000)\r\n\t\t.fadeOut(1000)\r\n\t\t.delay(500)\r\n\t\t.attachTo(target)\r\n\t\t.loopProperty(\"sprite\", \"position.y\", {\r\n\t\t\tvalues: positions[2].x,\r\n\t\t\tduration: 20,\r\n\t\t\tpingPong: false,\r\n\t\t})\r\n\t\t.loopProperty(\"sprite\", \"position.x\", {\r\n\t\t\tvalues: positions[2].y,\r\n\t\t\tduration: 20,\r\n\t\t\tpingPong: false,\r\n\t\t})\r\n\t\t.persist()\r\n\t\t.scaleToObject(1)\r\n\t\t.opacity(0.5)\r\n\t\t.name(`mirror-image-3-${target.id}`);\r\n\tawait sequence.play();\r\n}\r\nif (args[0] === \"off\") {\r\n\t// If the dynamic active effect ended\r\n\tSequencer.EffectManager.endEffects({\r\n\t\tname: `mirror-image-1-${target.id}`,\r\n\t\tobject: target.id\r\n\t});\r\n\tSequencer.EffectManager.endEffects({\r\n\t\tname: `mirror-image-2-${target.id}`,\r\n\t\tobject: target.id\r\n\t});\r\n\tSequencer.EffectManager.endEffects({\r\n\t\tname: `mirror-image-3-${target.id}`,\r\n\t\tobject: target.id\r\n\t});\r\n\r\n\tconst seq = new Sequence();\r\n\tseq.animation()\r\n\t\t.on(casterToken)\r\n\t\t.fadeIn(1000)\r\n\t\t.play;\r\n}\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Mirror Image","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"ivjdjdw96826pz3v","command":"({\r\n\tname: \"Frostbite Persist\",\r\n\tid: \"ivjdjdw96826pz3v\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nlet tokenD = canvas.tokens.get(args[1].tokenId);\r\n\r\nif(args[0] === \"on\"){\r\n\t// If the dynamic active effect started\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.token_border.circle.static.blue.001\")\r\n\t\t.delay(2000)\r\n\t\t.attachTo(tokenD)\r\n\t\t.scale(0.5)\r\n\t\t.fadeIn(2000)\r\n\t\t.fadeOut(2000)\r\n\t\t.persist()\r\n\t\t.name(`frostbite-${tokenD.id}`);\r\n\tawait sequence.play();\r\n}\r\n\r\nif(args[0] === \"off\"){\r\n\t// If the dynamic active effect ended\r\n\tSequencer.EffectManager.endEffects({ name: `frostbite-${tokenD.id}`, object: tokenD });\r\n}\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Frostbite Persist","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"ix1myz3dcu5enyzm","command":"({\r\n\tname: \"Flaming Sphere\",\r\n\tid: \"ix1myz3dcu5enyzm\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nawait warpgate.spawn(\"Flaming Sphere\", {}, {\r\n\tpre: async (location) => {\r\n\t\tconst seq = new Sequence();\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.energy_strands.complete.orange.01\")\r\n\t\t\t.scale(0.4)\r\n\t\t\t.atLocation(casterToken)\r\n\t\t\t.fadeIn(500)\r\n\t\t\t.duration(1500)\r\n\t\t\t.fadeOut(500);\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.conjuration\")\r\n\t\t\t.scale(0.4)\r\n\t\t\t.atLocation(casterToken)\r\n\t\t\t.waitUntilFinished(-1000)\r\n\t\t\t.fadeIn(500)\r\n\t\t\t.duration(1500)\r\n\t\t\t.fadeOut(500)\r\n\t\t\t.filter(\"Glow\", { color: 0xecbe51 });\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.explosion.02.orange\")\r\n\t\t\t.atLocation(location)\r\n\t\t\t.fadeIn(100)\r\n\t\t\t.fadeOut(100)\r\n\t\t\t.scale(0.8)\r\n\t\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\t\tawait sequence.play();\r\n\r\n\t\t// Sleep for 300ms\r\n\t\tawait (new Promise(resolve => setTimeout(resolve, 800)));\r\n\t}\r\n}, {\r\n\tcollision: false\r\n});\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Flaming Sphere","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"jco4sq2pphivhjn5","command":"({\r\n\tname: \"Cause Fear\",\r\n\tid: \"jco4sq2pphivhjn5\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.necromancy\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-1000)\r\n\t.filter(\"Glow\", { color: 0xd7e5f0 });\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.004.blue\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.randomRotation();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.toll_the_dead.blue.shockwave\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.scale(0.8, 1)\r\n\t\t.randomRotation();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.fireflies.many.02.blue\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.4, 0.5)\r\n\t\t.randomRotation();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.toll_the_dead.blue.skull_smoke\")\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(100)\r\n\t\t.scale(0.4, 0.55)\r\n\t\t.atLocation(target)\r\n\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\" });\r\n}\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Cause Fear","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"jdf1qr1rmejwyvhv","command":"({\r\n\tname: \"Searing Smite\",\r\n\tid: \"jdf1qr1rmejwyvhv\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\n// This needs to be placed in dae's macro.execute with the @token and @target parameters in order to work correctly.\r\n\r\nconst casterToken = canvas.scene.tokens.get(args[1]);\r\nconst targetActor = canvas.scene.tokens.get(args[2]);\r\n\r\nif (args[0] === \"on\") {\r\n\t// If the dynamic active effect started\r\n\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(2000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.waitUntilFinished(-1200)\r\n\t\t.filter(\"Glow\", { color: 0xffa500 })\r\n\t\t.opacity(0.8);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.spear.melee.fire.orange\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.stretchTo(targetActor)\r\n\t\t.waitUntilFinished(-1200)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(1500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.explosion.02.orange\")\r\n\t\t.atLocation(targetActor)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(100)\r\n\t\t.scale(0.5);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.flaming_sphere.orange\")\r\n\t\t.scaleToObject(2)\r\n\t\t.belowTokens()\r\n\t\t.attachTo(targetActor)\r\n\t\t.duration(2000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(1000)\r\n\t\t.persist()\r\n\t\t.name(`searing-smite-${targetActor.id}`);\r\n\tawait sequence.play();\r\n\r\n}\r\nif (args[0] === \"off\") {\r\n\t// If the dynamic active effect ended\r\n\tSequencer.EffectManager.endEffects({ name: `searing-smite-${targetActor.id}`, object: targetActor.id });\r\n}\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Searing Smite","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"jpsypegwv7sg7jv0","command":"({\r\n\tname: \"Absorb Elements\",\r\n\tid: \"jpsypegwv7sg7jv0\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.abjuration\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.opacity(0.3)\r\n\t.filter(\"Glow\", { color: 0xffffff })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.border.circle.inpulse.02.normal\")\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.duration(4500)\r\n\t.scale(0.3)\r\n\t.atLocation(casterToken)\r\n\t.belowTokens();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.shield.01.outro_explode.blue\")\r\n\t.fadeIn(500)\r\n\t.fadeOut(100)\r\n\t.atLocation(casterToken)\r\n\t.waitUntilFinished(-500)\r\n\t.scale(0.4);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.shield.01.outro_explode.red\")\r\n\t.fadeIn(100)\r\n\t.fadeOut(100)\r\n\t.atLocation(casterToken)\r\n\t.waitUntilFinished(-500)\r\n\t.scale(0.4);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.shield.01.outro_explode.green\")\r\n\t.fadeIn(100)\r\n\t.fadeOut(100)\r\n\t.atLocation(casterToken)\r\n\t.waitUntilFinished(-500)\r\n\t.scale(0.4);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.shield.01.outro_explode.yellow\")\r\n\t.fadeIn(100)\r\n\t.fadeOut(100)\r\n\t.atLocation(casterToken)\r\n\t.scale(0.4);\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Absorb Elements","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"k0ag972m22riko9n","command":"({\r\n\tname: \"Ice Storm\",\r\n\tid: \"k0ag972m22riko9n\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nawait Sequencer.Preloader.preloadForClients(\r\n\t[\"jb2a.fire_bolt.blue\",\r\n\t\t\"jb2a.extras.tmfx.inflow.circle.02\",\r\n\t\t\"jb2a.magic_signs.circle.02.evocation.intro.blue\",\r\n\t\t\"jb2a.ice_spikes.radial.burst.blue\"\r\n\t], false);\r\n\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nlet iceTemplate = canvas.templates.get(args[0].templateId);\r\nlet tokenD = canvas.tokens.get(args[0].tokenId);\r\n\r\nlet templatePosition = iceTemplate.position;\r\n\r\nawait iceTemplate.document.delete();\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.evocation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0x7393B3 })\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"autoanimations.range.firebolt.01.blue\")\r\n\t.atLocation(tokenD)\r\n\t.startTime(350)\r\n\t.stretchTo(templatePosition)\r\n\t.waitUntilFinished(-1000);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.inflow.circle.02\")\r\n\t.atLocation(templatePosition)\r\n\t.fadeIn(500)\r\n\t.filter(\"Glow\", { color: 0x7393B3 })\r\n\t.fadeOut(500)\r\n\t.scale(2.5)\r\n\t.opacity(0.3)\r\n\t.belowTokens();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.magic_signs.circle.02.evocation.intro.blue\")\r\n\t.atLocation(templatePosition)\r\n\t.scale(1)\r\n\t.waitUntilFinished(250)\r\n\t.belowTokens();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.ice_spikes.radial.burst.blue\")\r\n\t.atLocation(templatePosition)\r\n\t.scale(1.5)\r\n\t.wait(150);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.sleet_storm.blue\")\r\n\t.atLocation(templatePosition)\r\n\t.scale(1)\r\n\t.fadeIn(300)\r\n\t.scaleIn(0, 300, { ease: \"easeOutSine\" })\r\n\t.persist()\r\n\t.fadeOut(2000)\r\n\t.belowTokens();\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Ice Storm","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"kclbvg47w938asu8","command":"({\r\n\tname: \"Spirit Guardians\",\r\n\tid: \"kclbvg47w938asu8\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.conjuration\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xc00000 })\r\n\t.waitUntilFinished(-500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.02.red\")\r\n\t.duration(1500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.7);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.spirit_guardians.dark_red.ring\")\r\n\t.attachTo(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\" })\r\n\t.persist();\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Spirit Guardians","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"kz9uergly2qn1cjz","command":"({\r\n\tname: \"Shadow Of Moil\",\r\n\tid: \"kz9uergly2qn1cjz\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nawait Sequencer.Preloader.preloadForClients([\r\n\t\"jb2a.energy_strands.complete.dark_red.01\",\r\n\t\"jb2a.darkness.black\",\r\n\t\"jb2a.fire_ring.500px.red\"\r\n], false);\r\n\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.necromancy\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.opacity(0.5)\r\n\t.filter(\"Glow\", { color: 0xffffff })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 })\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.fadeIn(500)\r\n\t.file(\"jb2a.energy_strands.complete.dark_red.01\")\r\n\t.persist()\r\n\t.scale(0.4)\r\n\t.attachTo(casterToken)\r\n\t.name(`ShadowOfMoil_${casterToken.data._id}`)\r\n\t.wait(1000);\r\n\r\nsequence\r\n\t.effect()\r\n\t.fadeIn(500)\r\n\t.file(\"jb2a.darkness.black\")\r\n\t.belowTokens()\r\n\t.opacity(0.3)\r\n\t.size(canvas.grid.size * 5)\r\n\t.persist()\r\n\t.attachTo(casterToken)\r\n\t.name(`ShadowOfMoilDarkness_${casterToken.data._id}`);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.fire_ring.500px.red\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.scaleToObject(1.25)\r\n\t.name(`FireRing_ShadowOfMoil_${casterToken.data._id}`)\r\n\t.persist();\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Shadow Of Moil","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"l71tl3s710spazda","command":"({\r\n\tname: \"Revivify\",\r\n\tid: \"l71tl3s710spazda\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.simple.necromancy\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.scaleIn(0, 300, { ease: \"easeOutCubic\" })\r\n\t.scaleToObject(4)\r\n\t.duration(1000)\r\n\t.fadeOut(500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.cure_wounds.400px.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scaleToObject(3)\r\n\t.duration(1500)\r\n\t.waitUntilFinished(-1000);\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.003.yellow\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.healing_generic.loop.bluewhite\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scaleToObject(3)\r\n\t\t.belowTokens()\r\n\t\t.opacity(0.5);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.cure_wounds.400px.blue\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scaleToObject(3)\r\n\t\t.duration(1500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.healing_generic.burst.bluewhite\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scaleToObject(3)\r\n\t\t.opacity(0.5);\r\n}\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Revivify","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"ly4wkrhaqdmjieyz","command":"({\r\n\tname: \"Acid Splash\",\r\n\tid: \"ly4wkrhaqdmjieyz\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.conjuration\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.opacity(0.3)\r\n\t.filter(\"Glow\", { color: 0x89F423 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.liquid.splash_side.green\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.rotateTowards(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5);\r\n\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.bullet.03.green\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.stretchTo(target)\r\n\t\t.waitUntilFinished(-500);\r\n\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.liquid.splash.bright_green\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scaleToObject(1.5);\r\n}\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Acid Splash","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"lywpzhilmbsb4kuo","command":"({\r\n\tname: \"Druidcraft\",\r\n\tid: \"lywpzhilmbsb4kuo\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.transmutation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1700)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0x89F423 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.green\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.butterflies.many.green\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.duration(2000);\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Druidcraft","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"m0kj4ha0vjnczsrn","command":"({\r\n\tname: \"Ice Knife\",\r\n\tid: \"m0kj4ha0vjnczsrn\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\n\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.conjuration\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.opacity(0.3)\r\n\t.filter(\"Glow\", { color: 0xD7E5F0 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\t\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.shield_themed.above.ice.03.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.duration(4000)\r\n\t.fadeOut(500)\r\n\t.opacity(0.5)\r\n\t.scale(0.5);\r\n\r\nfor (const target of targets)\r\n{\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.bolt.cold.blue\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.stretchTo(target)\r\n\t\t.waitUntilFinished(-1400);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.side_impact.ice_shard.blue\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.rotateTowards(target)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(100)\r\n\t\t.scale(0.5);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact_themed.ice_shard.blue\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.waitUntilFinished(-2000)\r\n\t\t.scaleToObject(2);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.ice_spikes.radial.burst.white\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(100)\r\n\t\t.scaleToObject(2)\r\n\t\t.waitUntilFinished(-1000);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact_themed.ice_shard.blue\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scaleToObject(2);\r\n}\r\n\r\nawait sequence.play();","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Ice Knife","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"ma9sw5fhe6pui5pu","command":"({\r\n\tname: \"Silence\",\r\n\tid: \"ma9sw5fhe6pui5pu\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nconst template = canvas.templates.placeables[canvas.templates.placeables.length - 1];\r\n//uncomment the below line to remove the placed template after casting\r\n//await template.delete();\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.light.outro.blue\")\r\n\t.delay(200)\r\n\t.fadeIn(300)\r\n\t.fadeOut(1000)\r\n\t.scaleToObject(3)\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(3500)\r\n\t.opacity(0.5);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.01.blueyellow\")\r\n\t.delay(200)\r\n\t.fadeIn(300)\r\n\t.fadeOut(500)\r\n\t.scaleToObject(2)\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(3500)\r\n\t.belowTokens()\r\n\t.duration(3500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.simple.illusion\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(1500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.4)\r\n\t.opacity(1)\r\n\t.waitUntilFinished(1000)\r\n\t.filter(\"Glow\", { color: 0xcc99ff });\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.border.circle.simple.01\")\r\n\t.atLocation(template.position)\r\n\t.scaleIn(0, 1000, { ease: \"easeOutCubic\", delay: 100 })\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.persist()\r\n\t.name(`silence${template.id}`)\r\n\t.opacity(0.8)\r\n\t.scaleToObject(9)\r\n\t.loopProperty(\"sprite\", \"rotation\", { from: 0, to: 360, duration: 80000 });\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Silence","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"mi4997dd2j7k7g1r","command":"({\r\n\tname: \"Purify Food And Drink\",\r\n\tid: \"mi4997dd2j7k7g1r\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.bubble.outro.rainbow\")\r\n\t.scaleToObject(2)\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.belowTokens();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.transmutation\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(2800)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xadd8e6 })\r\n\t.opacity(0.8);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.outpulse.circle.02.normal\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(2800)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xadd8e6 })\r\n\t.opacity(0.8);\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Purify Food And Drink","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"mqkc2wz4wr1dcs8m","command":"({\r\n\tname: \"Fog Cloud\",\r\n\tid: \"mqkc2wz4wr1dcs8m\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\n\r\nconst template = canvas.templates.placeables[canvas.templates.placeables.length-1];\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.light.outro.blue\")\r\n\t.delay(200)\r\n\t.fadeIn(300)\r\n\t.fadeOut(1000)\r\n\t.scaleToObject(3)\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(3500)\r\n\t.opacity(0.5);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.01.blueyellow\")\r\n\t.delay(200)\r\n\t.fadeIn(300)\r\n\t.fadeOut(500)\r\n\t.scaleToObject(2)\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(3500)\r\n\t.belowTokens()\r\n\t.animateProperty(\"sprite\", \"rotation\", { from: 0, to: 360, duration: 4000, ease: \"easeInOutCubic\"});\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.simple.conjuration\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(1500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.4)\r\n\t.opacity(1)\r\n\t.waitUntilFinished(1000);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.fog_cloud.1.white\")\r\n\t.atLocation(template.position)\r\n\t.fadeIn(4000)\r\n\t.fadeOut(4000)\r\n\t.persist()\r\n\t.name(`fog-cloud${template.id}`)\r\n\t.opacity(0.8)\r\n\t.scaleToObject(9);\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Fog Cloud","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"mtz8ddzcyenb76jy","command":"({\r\n\tname: \"Sun Blade\",\r\n\tid: \"mtz8ddzcyenb76jy\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nimport Sequence from \"../../../dist/module/sequencer.js\";\r\n\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nlet target = Array.from(game.user.targets)[0];\r\n//let targetImg = Array.from(game.user.targets)[0].data.img;\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.sword.melee.01.white\")\r\n\t.atLocation(casterToken)\r\n\t.stretchTo(target)\r\n\t.filter(\"Glow\", { color: 0xffa700 })\r\n\t.waitUntilFinished(-500)\r\n\t.size(canvas.grid.size * 2);\r\n\r\nsequence\r\n\t.effect()\r\n\t.from(target)\r\n\t.duration(1500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.atLocation(target)\r\n\t.filter(\"Glow\", { color: 0xffa700 })\r\n\t.scaleToObject()\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.flames.01.orange\")\r\n\t.filter(\"Glow\", { color: 0xffa700 })\r\n\t.atLocation(target)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.waitUntilFinished(-1500)\r\n\t.duration(1000);\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Sun Blade","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"n0rcalcgb8k5g5wf","command":"({\r\n\tname: \"Mage Hand\",\r\n\tid: \"n0rcalcgb8k5g5wf\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nawait warpgate.spawn(\"Mage Hand\", {}, {\r\n\tpre: async (location) => {\r\n\t\tconst sequence = new Sequence();\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.conjuration\")\r\n\t\t\t.atLocation(casterToken)\r\n\t\t\t.duration(2000)\r\n\t\t\t.fadeIn(500)\r\n\t\t\t.fadeOut(500)\r\n\t\t\t.scale(0.5)\r\n\t\t\t.opacity(0.3)\r\n\t\t\t.filter(\"Glow\", { color: 0xa1c4fd })\r\n\t\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t\t\t.atLocation(casterToken)\r\n\t\t\t.fadeIn(100)\r\n\t\t\t.fadeOut(200)\r\n\t\t\t.duration(1200)\r\n\t\t\t.waitUntilFinished(-500);\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.toll_the_dead.blue.shockwave\")\r\n\t\t\t.atLocation(location)\r\n\t\t\t.fadeIn(500)\r\n\t\t\t.fadeOut(500)\r\n\t\t\t.scale(0.5)\r\n\t\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 })\r\n\t\t\t.filter(\"Glow\", { color: 0xa1c4fd });\r\n\r\n\t\tawait sequence.play();\r\n\r\n\t\t// Sleep for 500ms\r\n\t\tawait (new Promise(resolve => setTimeout(resolve, 1200)));\r\n\t}\r\n}, {\r\n\tcollision: false\r\n});\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Mage Hand","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"n3fxo2g2199go43m","command":"({\r\n\tname: \"Arms of Hadar\",\r\n\tid: \"n3fxo2g2199go43m\",\r\n\tspellType: \"templates\"\r\n});\r\n// @endmeta\r\n\r\n// Templates work a little differently.\r\n\r\nconst casterToken = args[1].sourceToken;\r\nlet targets = canvas.tokens.placeables.filter(x => x.isTargeted);\r\nconst template = args[1].templateData.data;\r\ntargets = targets.filter(x => x != casterToken);\r\ngame.user.updateTokenTargets(targets.map(x => x.id));\r\n\r\nconst sequence = new Sequence();\r\n\r\nsequence.effect()\r\n\t.file('jb2a.extras.tmfx.runes.circle.outpulse.conjuration')\r\n\t.attachTo(casterToken)\r\n\t.tint('#7851a9')\r\n\t.fadeOut(300)\r\n\t.scale(0.4)\r\n\t.waitUntilFinished(-500);\r\n\r\nlet lastEffect;\r\nfor (const target of targets) {\r\n\tlastEffect = sequence.effect()\r\n\t\t// Make the effect name end in either 02 or 03 so the effects are 'random'.\r\n\t\t.file('jb2a.energy_beam.normal.dark_purplered.0' + Math.floor(Math.random() * (3 - 2 + 1) + 2))\r\n\t\t.atLocation(template)\r\n\t\t.stretchTo(target)\r\n\t\t.fadeIn(200)\r\n\t\t.fadeOut(300)\r\n\t\t.scale(0.5);\r\n}\r\n\r\nif (lastEffect) {\r\n\tlastEffect.waitUntilFinished();\r\n}\r\n\r\nsequence.effect()\r\n\t.file('jb2a.arms_of_hadar.dark_purple')\r\n\t.atLocation(template)\r\n\t.fadeIn(250)\r\n\t.fadeOut(400)\r\n\t.scaleOut(1.5, 500)\r\n\t.belowTokens();\r\n\r\n\r\nawait sequence.play();\r\nawait canvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", [template._id]);","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Arms of Hadar","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"nedl8h2sldhvzs3j","command":"({\r\n\tname: \"Mending\",\r\n\tid: \"nedl8h2sldhvzs3j\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.transmutation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1700)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xffa500 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.rainbow\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200)\r\n\t.belowTokens();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.outpulse.circle.02.normal\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xffa500 })\r\n\t.opacity(0.5);\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Mending","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"nhbr0zzon1mr0eds","command":"({\r\n\tname: \"Light\",\r\n\tid: \"nhbr0zzon1mr0eds\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\nconst casterToken = arguments[0].token;\r\nconsole.log(arguments);\r\nconsole.log(args);\r\n\r\n// If source token is not present, then we should have a second set of options where tokenUuid is visible\r\nlet target = args[1].sourceToken;\r\nif (!target) {\r\n\ttarget = await fromUuid(args[1].tokenUuid);\r\n}\r\n\r\nif (args[0] === \"on\") {\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(1700)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.filter(\"Glow\", { color: 0xffa500 })\r\n\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.moonbeam.01.intro.rainbow\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(200)\r\n\t\t.duration(1200);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.yellow.5\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(200);\r\n\r\n\tsequence.play();\r\n\ttarget.document.update({ light:{ bright : 20, dim: 40, color : '#ffffff', alpha: 0.5, angle: 360, animation:{ type: \"pulse\", speed: 5, intensity: 5}}});\r\n}\r\n\r\nelse if (args[0] === \"off\") {\r\n\ttarget.document.update({ light:{ bright : 0, dim: 0, color : '#000000', alpha: 0.5, angle: 360, animation:{ type: \"pulse\", speed: 5, intensity: 5}}});\r\n}    ","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Light","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"nhlwmwenppye68tr","command":"({\r\n\tname: \"Detect Evil\",\r\n\tid: \"nhlwmwenppye68tr\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.divination\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1700)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0x8b0000 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200)\r\n\t.waitUntilFinished(-500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.detect_magic.circle.purple\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.duration(2500)\r\n\t.randomRotation();\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Detect Evil","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"nll2ed9hlbkogp68","command":"({\r\n\tname: \"Suggestion\",\r\n\tid: \"nll2ed9hlbkogp68\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.enchantment\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-2000)\r\n\t.filter(\"Glow\", { color: 0xffffbf });\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.004.yellow\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.energy_strands.overlay.pinkyellow.01\")\r\n\t\t.delay(200)\r\n\t\t.fadeIn(300)\r\n\t\t.fadeOut(500)\r\n\t\t.duration(3000)\r\n\t\t.scale(0.4)\r\n\t\t.opacity(0.4)\r\n\t\t.atLocation(target)\r\n\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\" });\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.simple.enchantment\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.scaleIn(0, 300, { ease: \"easeOutCubic\" })\r\n\t\t.scaleToObject(2)\r\n\t\t.duration(2000)\r\n\t\t.fadeOut(500)\r\n\t\t.filter(\"Glow\", { color: 0xffffbf });\r\n}\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Suggestion","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"nmb7bn2qusfu4tvf","command":"({\r\n\tname: \"Conjure Barrage\",\r\n\tid: \"nmb7bn2qusfu4tvf\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.conjuration\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.opacity(0.3)\r\n\t.filter(\"Glow\", { color: 0xcc8899 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200)\r\n\t.waitUntilFinished(-500);\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.dagger.throw.01.white\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.stretchTo(target)\r\n\t\t.randomOffset()\r\n\t\t.repeats(5, 30, 60);\r\n\r\n}\r\n\r\nawait sequence.play();\r\nawait canvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", [template.data._id]);\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Conjure Barrage","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"nwh4r08xvuvv30b9","command":"({\r\n\tname: \"Slow Persist\",\r\n\tid: \"nwh4r08xvuvv30b9\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nlet targetID = canvas.tokens.get(args[1].tokenId);\r\n\r\nif(args[0] === \"on\"){\r\n\t// If the dynamic active effect started\r\n\r\n\tconst sequence = new Sequence(); \r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.004.dark_purple\")\r\n\t\t.atLocation(targetID)\r\n\t\t.fadeIn(500)\r\n\t\t.delay(2000);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.delay(2000)\r\n\t\t.file(\"jb2a.energy_strands.overlay.purple.01\")\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.4, 0.45)\r\n\t\t.attachTo(targetID)\r\n\t\t.randomRotation()\r\n\t\t.scaleIn(0, 500, {ease: \"easeOutCubic\"})\r\n\t\t.persist()\r\n\t\t.name(`slow-${targetID.id}`);\r\n\tawait sequence.play();\r\n\r\n}\r\nif(args[0] === \"off\"){\r\n\t// If the dynamic active effect ended\r\n\tSequencer.EffectManager.endEffects({ name: `slow-${targetID.id}`, object: targetID });\r\n}    \r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Slow Persist","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"nzgf0hay2smyeo6p","command":"({\r\n\tname: \"Word Of Radiance\",\r\n\tid: \"nzgf0hay2smyeo6p\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nconst template = canvas.templates.placeables[canvas.templates.placeables.length-1];\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(1500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-1200)\r\n\t.filter(\"Glow\", { color: 0xffffbf })\r\n\t.opacity(0.8);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.light.intro.yellow\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.belowTokens()\r\n\t.fadeOut(500)\r\n\t.duration(1200)\r\n\t.fadeIn(500)\r\n\t.scale(0.7);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.explosion.03.blueyellow\")\r\n\t.atLocation(template.position);\r\nawait sequence.play();\r\n\r\ncanvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", [template.data._id]);\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Word Of Radiance","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"ofbqs329tin7yiqk","command":"({\r\n\tname: \"Healing Spirit\",\r\n\tid: \"ofbqs329tin7yiqk\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nawait warpgate.spawn(\"Healing Spirit\", {}, {\r\n\tpre: async (location) => {\r\n\t\tconst seq = new Sequence();\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.conjuration\")\r\n\t\t\t.atLocation(casterToken)\r\n\t\t\t.duration(2000)\r\n\t\t\t.fadeIn(500)\r\n\t\t\t.fadeOut(500)\r\n\t\t\t.scale(0.5)\r\n\t\t\t.opacity(0.3)\r\n\t\t\t.filter(\"Glow\", { color: 0x7D87BF })\r\n\t\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t\t\t.atLocation(casterToken)\r\n\t\t\t.fadeIn(100)\r\n\t\t\t.fadeOut(200)\r\n\t\t\t.duration(1200)\r\n\t\t\t.waitUntilFinished(-500);\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.toll_the_dead.blue.shockwave\")\r\n\t\t\t.atLocation(location)\r\n\t\t\t.fadeIn(500)\r\n\t\t\t.fadeOut(500)\r\n\t\t\t.scale(0.5)\r\n\t\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\r\n\t\tawait sequence.play();\r\n\r\n\t\t// Sleep for 500ms\r\n\t\tawait (new Promise(resolve => setTimeout(resolve, 1200)));\r\n\t}\r\n}, {\r\n\tcollision: false\r\n});\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Healing Spirit","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"ohts1gm27cjypwnu","command":"({\r\n\tname: \"Conjure Animals\",\r\n\tid: \"ohts1gm27cjypwnu\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.conjuration\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.opacity(0.3)\r\n\t.filter(\"Glow\", { color: 0xffffff })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.energy_strands.overlay.blue.01\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.opacity(0.3);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.explosion.07.bluewhite\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(100)\r\n\t.waitUntilFinished(-500);\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Conjure Animals","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"okpi5lrz12burasz","command":"({\r\n\tname: \"Hunters Mark\",\r\n\tid: \"okpi5lrz12burasz\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\n\r\nconst casterToken = arguments[0].token;\r\nconsole.log(arguments);\r\nconsole.log(args);\r\n\r\n// If source token is not present, then we should have a second set of options where tokenUuid is visible\r\nlet target = args[1].sourceToken;\r\nif (!target) {\r\n\ttarget = await fromUuid(args[1].tokenUuid);\r\n}\r\n\r\n\r\nif (args[0] === \"on\") {\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.markers.light.intro.green\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.hunters_mark.pulse.02.blue\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(4000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.waitUntilFinished(-2000)\r\n\t\t.filter(\"Glow\", { color: 0xfefebe })\r\n\t\t.opacity(0.5);\r\n\t\t\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.hunters_mark.loop.02.blue\")\r\n\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\" })\r\n\t\t.fadeOut(500)\r\n\t\t.scaleToObject(1)\r\n\t\t.attachTo(target)\r\n\t\t.persist()\r\n\t\t.opacity(0.5)\r\n\t\t.name(`hunters-mark-${target.id}`);\r\n\t\r\n\tawait sequence.play();\r\n}\r\n\r\nelse if (args[0] === \"off\") {\r\n\tSequencer.EffectManager.endEffects({ name: `hunters-mark-${casterToken.id}`, object: casterToken });\r\n}  ","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Hunters Mark","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"oqi7iktmi3rvzbcd","command":"({\r\n\tname: \"Shocking Grasp\",\r\n\tid: \"oqi7iktmi3rvzbcd\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\nconst casterToken = arguments[0].token;\r\nconsole.log(arguments);\r\nconsole.log(args);\r\n\r\n// If source token is not present, then we should have a second set of options where tokenUuid is visible\r\nlet target = args[1].sourceToken;\r\nif (!target) {\r\n\ttarget = await fromUuid(args[1].tokenUuid);\r\n}\r\n\r\nlet tokenD = canvas.tokens.get(args[1].tokenId);\r\n\r\nif(args[0] === \"on\") {\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(2000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.filter(\"Glow\", { color: 0x5e899e })\r\n\t\t.opacity(0.8)\r\n\t\t.waitUntilFinished(-1000);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.static_electricity.02.blue\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.belowTokens()\r\n\t\t.fadeOut(500)\r\n\t\t.duration(1800)\r\n\t\t.fadeIn(500)\r\n\t\t.scale(0.7);\r\n\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.011.blue\")\r\n\t\t.atLocation(target)\r\n\t\t.scaleToObject(2);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.static_electricity.02.blue\")\r\n\t\t.delay(2000)\r\n\t\t.attachTo(target)\r\n\t\t.scaleToObject(1.2)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(2000)\r\n\t\t.persist()\r\n\t\t.name(`shocking-grasp-${target.id}`);\r\n\t\t\t\r\n\tawait sequence.play();\r\n}\r\n\t\r\nelse if (args[0] === \"off\"){\r\n\tSequencer.EffectManager.endEffects({ name: `shocking-grasp-${casterToken.id}`, object: casterToken });\r\n}\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Shocking Grasp","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"owwkc7rp76f4e1il","command":"({\r\n\tname: \"Vicious Mockery\",\r\n\tid: \"owwkc7rp76f4e1il\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nif (args[0] === \"on\") {\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.markers.music.dark_red\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(3500)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.belowTokens();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.enchantment\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(4000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.waitUntilFinished(-2000)\r\n\t\t.filter(\"Glow\", { color: 0xcd5c5c });\r\n\r\n\tfor (const target of targets) {\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.impact.004.dark_red\")\r\n\t\t\t.atLocation(target)\r\n\t\t\t.fadeIn(500);\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.energy_strands.overlay.dark_red.01\")\r\n\t\t\t.delay(200)\r\n\t\t\t.fadeIn(300)\r\n\t\t\t.fadeOut(500)\r\n\t\t\t.duration(3000)\r\n\t\t\t.scale(0.4)\r\n\t\t\t.opacity(0.4)\r\n\t\t\t.atLocation(target)\r\n\t\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\" });\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.extras.tmfx.runes.circle.simple.enchantment\")\r\n\t\t\t.atLocation(target)\r\n\t\t\t.fadeIn(500)\r\n\t\t\t.scaleIn(0, 300, { ease: \"easeOutCubic\" })\r\n\t\t\t.scaleToObject(2)\r\n\t\t\t.duration(2000)\r\n\t\t\t.fadeOut(500)\r\n\t\t\t.filter(\"Glow\", { color: 0xcd5c5c });\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.token_border.circle.spinning.purple.009\")\r\n\t\t\t.delay(2000)\r\n\t\t\t.attachTo(target)\r\n\t\t\t.scale(0.5)\r\n\t\t\t.fadeIn(2000)\r\n\t\t\t.fadeOut(2000)\r\n\t\t\t.persist()\r\n\t\t\t.name(`mockery-${target.id}`);\r\n\t}\r\n\t\r\n\tawait sequence.play();\r\n}\r\n\r\nif (args[0] === \"off\") {\r\n\tSequencer.EffectManager.endEffects({ name: `mockery-${casterToken.id}`, object: casterToken });\r\n}\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Vicious Mockery","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"p0ok6oj175ovpodr","command":"({\r\n\tname: \"Burning Hands\",\r\n\tid: \"p0ok6oj175ovpodr\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1700)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xffa500 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.impact.yellow.5\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.burning_hands.02.orange\")\r\n\t.atLocation(template.position, { cacheLocation: true })\r\n\t.stretchTo(template, { cacheLocation: true });\r\nawait sequence.play();\r\n\r\ncanvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", [template.data._id]);\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Burning Hands","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"p72ey3f7tog6gmnz","command":"({\r\n\tname: \"Alter Self\",\r\n\tid: \"p72ey3f7tog6gmnz\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.bubble.outro.rainbow\")\r\n\t.scaleToObject(2)\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.belowTokens();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.transmutation\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(2800)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xadd8e6 })\r\n\t.opacity(0.8);\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Alter Self","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"pnc9agq0vkn8lm4g","command":"({\r\n\tname: \"Hold Person\",\r\n\tid: \"pnc9agq0vkn8lm4g\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.enchantment\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-2000)\r\n\t.filter(\"Glow\", { color: 0xc00000 });\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.004.dark_red\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.static_electricity.01.red\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.duration(2000)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.4)\r\n\t\t.opacity(0.8);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.simple.enchantment\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.scaleIn(0, 300, { ease: \"easeOutCubic\" })\r\n\t\t.scaleToObject(2)\r\n\t\t.duration(2000)\r\n\t\t.fadeOut(500)\r\n\t\t.filter(\"Glow\", { color: 0xc00000 });\r\n}\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Hold Person","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"poy59bqr9nctkd4j","command":"({\r\n\tname: \"Psychic Scimitar\",\r\n\tid: \"poy59bqr9nctkd4j\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nawait Sequencer.Preloader.preloadForClients(\r\n\t[\"jb2a.scimitar.melee.01.purple\",\r\n\t\t\"jb2a.markers.01.purplepink\"\r\n\t], false);\r\n\r\n//This uses MIDI QOL to check for Hits before playing certain parts\r\n\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nlet target = canvas.tokens.get(args[0].targets[0].id);\r\n\r\n//midi checking for hit.\r\nlet targetHit = args[0].hitTargets.length === 1;\r\n\r\nconst sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.scimitar.melee.01.purple\")\r\n\t.atLocation(casterToken)\r\n\t.stretchTo(target)\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.impact.004.pinkpurple\")\r\n\t.atLocation(target)\r\n\t.fadeIn(500)\r\n\t.fadeOut(300)\r\n\t.playIf(targetHit);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.01.purplepink\")\r\n\t.atLocation(target)\r\n\t.duration(1500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(300)\r\n\t.playIf(targetHit);\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Psychic Scimitar","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"qbsatenzs9h6l5a2","command":"({\r\n\tname: \"Guiding Bolt\",\r\n\tid: \"qbsatenzs9h6l5a2\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nlet target = Array.from(game.user.targets)[0];\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.light.intro.yellow\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(1000)\r\n\t.belowTokens();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xffffbf })\r\n\t.waitUntilFinished(-500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.guiding_bolt.01.blueyellow\")\r\n\t.fadeIn(500)\r\n\t.fadeOut(300)\r\n\t.atLocation(casterToken)\r\n\t.stretchTo(target)\r\n\t.playIf(args[0].hitTargets.length === 1); // Comment this line out if not using MIDI\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Guiding Bolt","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"qpe1s9dnvotno9ce","command":"({\r\n\tname: \"Find Familiar\",\r\n\tid: \"qpe1s9dnvotno9ce\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.conjuration\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.opacity(0.3)\r\n\t.filter(\"Glow\", { color: 0xffffff })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.magic_signs.circle.02.conjuration.intro.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(100)\r\n\t.waitUntilFinished(-500)\r\n\t.scale(0.5);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.magic_signs.circle.02.conjuration.outro.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeOut(100)\r\n\t.waitUntilFinished(-100)\r\n\t.scale(0.5);\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Find Familiar","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"qr2sskuwjveniyu9","command":"({\r\n\tname: \"Tasha's Caustic Brew AE\",\r\n\tid: \"qr2sskuwjveniyu9\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\n\r\nconsole.log(arguments);\r\nconsole.log(args);\r\n\r\n// If source token is not present, then we should have a second set of options where tokenUuid is visible\r\nlet target = args[1].sourceToken;\r\nif (!target) {\r\n\ttarget = await fromUuid(args[1].tokenUuid);\r\n}\r\n\r\nconsole.log(args[0]);\r\nswitch (args[0]) {\r\n\tcase \"on\": {\r\n\t\tconst sequence = new Sequence();\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.markers.drop.dark_green.02\")\r\n\t\t\t.attachTo(target)\r\n\t\t\t.scale(0.5)\r\n\t\t\t.persist()\r\n\t\t\t.name(`CausticBrew-${target.id}`)\r\n\t\t\t.fadeIn(300)\r\n\t\t\t.fadeOut(300)\r\n\t\t\t.extraEndDuration(800);\r\n\t\tawait sequence.play();\r\n\t\tbreak;\r\n\t};\r\n\r\n\tcase \"off\": {\r\n\t\tSequencer.EffectManager.endEffects({ name: `CausticBrew-${target.id}`, object: target });\r\n\t\tbreak;\r\n\t};\r\n\r\n\tcase \"each\": {\r\n\t\tconst sequence = new Sequence();\r\n\t\tsequence.effect()\r\n\t\t\t.file('jb2a.liquid.splash.green')\r\n\t\t\t.attachTo(target)\r\n\t\t\t.scaleToObject(1.2)\r\n\t\t\t.fadeOut(300);\r\n\r\n\t\tsequence.play();\r\n\r\n\t\tconst itemData = args[1].efData.flags.dae.itemData;\r\n\t\tconst level = itemData.data.level;\r\n\t\tconst damageRoll = await new Roll(`${level * 2}d4`).roll({async:true});\r\n\r\n\t\titemData.data.components.concentration = false;\r\n\t\tnew MidiQOL.DamageOnlyWorkflow(target.actor, target, damageRoll.total, \"acid\", [target], damageRoll, {flavor: \"(Acid)\" , itemData, itemCardId: \"new\"});\r\n\r\n\t\tbreak;\r\n\t};\r\n}","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Tasha's Caustic Brew AE","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"qwty7zahgkp6f1os","command":"({\r\n\tname: \"Hellish Rebuke\",\r\n\tid: \"qwty7zahgkp6f1os\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-1500)\r\n\t.filter(\"Glow\", { color: 0xffad33 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.impact.004.orange\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100);\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.flames.orange.01\")\r\n\t\t.fadeIn(100)\r\n\t\t.duration(4000)\r\n\t\t.fadeOut(1000)\r\n\t\t.scaleToObject(3)\r\n\t\t.atLocation(target)\r\n\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\" })\r\n\t\t.scaleOut(0, 4000, { ease: \"easeOutCubic\" });\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.011.orange\")\r\n\t\t.atLocation(target)\r\n\t\t.scaleIn(0, 300, { ease: \"easeOutCubic\" })\r\n\t\t.scaleToObject(2);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.smoke.puff.centered.dark_black.0\")\r\n\t\t.atLocation(target)\r\n\t\t.scaleIn(0, 300, { ease: \"easeOutCubic\" })\r\n\t\t.scaleToObject(3)\r\n\t\t.randomRotation();\r\n}\r\nawait sequence.play();\r\n\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Hellish Rebuke","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"rbiljnyf4lj5y7mh","command":"({\r\n\tname: \"Entangle\",\r\n\tid: \"rbiljnyf4lj5y7mh\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nconst template = canvas.templates.placeables[canvas.templates.placeables.length-1];\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.02.greenorange\")\r\n\t.delay(200)\r\n\t.fadeIn(300)\r\n\t.fadeOut(1000)\r\n\t.scaleToObject(3)\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(1500)\r\n\t.opacity(0.5);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.01.greenorange\")\r\n\t.delay(200)\r\n\t.fadeIn(300)\r\n\t.fadeOut(500)\r\n\t.scaleToObject(2)\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(1500)\r\n\t.belowTokens()\r\n\t.animateProperty(\"sprite\", \"rotation\", { from: 0, to: 360, duration: 4000, ease: \"easeInOutCubic\"});\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.simple.conjuration\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(1500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.4)\r\n\t.opacity(1)\r\n\t.waitUntilFinished(-300)\r\n\t.filter(\"Glow\", { color: 0x00ff00});    \r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.entangle.green\")\r\n\t.atLocation(template.position, {cacheLocation: true})\r\n\t.fadeIn(1500)\r\n\t.persist()\r\n\t.fadeOut(1500)\r\n\t.offset({ x: -200, y: -200 })\r\n\t.name(`entangle-${template.id}`)\r\n\t.belowTokens();\r\nawait sequence.play();\r\n\r\ncanvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", [template.data._id]);\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Entangle","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"rdwkv92s08dm6dk4","command":"({\r\n\tname: \"Inflict Wounds\",\r\n\tid: \"rdwkv92s08dm6dk4\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.simple.necromancy\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.scaleIn(0, 300, { ease: \"easeOutCubic\" })\r\n\t.scaleToObject(4)\r\n\t.duration(1000)\r\n\t.fadeOut(500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.cure_wounds.400px.red\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scaleToObject(3)\r\n\t.duration(1500)\r\n\t.waitUntilFinished(-800);\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.003.dark_red\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.004.dark_red\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.file(\"jb2a.portals.horizontal.ring.dark_red\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.scaleIn(0, 300, { ease: \"easeOutCubic\" })\r\n\t\t.scaleToObject(2, 2.2)\r\n\t\t.duration(2500)\r\n\t\t.fadeOut(500)\r\n\t\t.belowTokens()\r\n\t\t.randomRotation();\r\n}\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Inflict Wounds","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"rlzi27d7bvach5qt","command":"({\r\n\tname: \"Animal Friendship\",\r\n\tid: \"rlzi27d7bvach5qt\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.enchantment\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-2000)\r\n\t.filter(\"Glow\", { color: 0x014421 });\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.moonbeam.01.intro.green\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(200)\r\n\t\t.belowTokens()\r\n\t\t.scaleToObject(1.5)\r\n\t\t.animateProperty(\"spriteContainer\", \"rotation\", { from: 0, to: 360, duration: 5000, delay: 0 });\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.shatter.green\")\r\n\t\t.delay(200)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(500)\r\n\t\t.duration(1200)\r\n\t\t.scale(0.4)\r\n\t\t.opacity(0.4)\r\n\t\t.atLocation(target);\r\n}\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Animal Friendship","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"rnkdnonfsvkq7lab","command":"({\r\n\tname: \"Sleet Storm\",\r\n\tid: \"rnkdnonfsvkq7lab\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nconst template = canvas.templates.placeables[canvas.templates.placeables.length-1];\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.02.dark_bluewhite\")\r\n\t.delay(200)\r\n\t.fadeIn(300)\r\n\t.fadeOut(1000)\r\n\t.scaleToObject(3)\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(3500)\r\n\t.opacity(0.5);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.01.dark_bluewhite\")\r\n\t.delay(200)\r\n\t.fadeIn(300)\r\n\t.fadeOut(500)\r\n\t.scaleToObject(2)\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(3500)\r\n\t.belowTokens()\r\n\t.animateProperty(\"sprite\", \"rotation\", { from: 0, to: 360, duration: 4000, ease: \"easeInOutCubic\"});\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.simple.conjuration\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(1500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.4)\r\n\t.opacity(1)\r\n\t.waitUntilFinished(1000)\r\n\t.filter(\"Glow\", { color: 0x00008b});    \r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.sleet_storm.blue\")\r\n\t.atLocation(template.position)\r\n\t.scaleToObject(15)\r\n\t.fadeIn(1000)\r\n\t.persist()\r\n\t.fadeOut(4000)\r\n\t.name(`sleet-storm${template.id}`)\r\n\t.opacity(0.7)\r\n\t.belowTokens();\r\nawait sequence.play();\r\n\r\ncanvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", [template.data._id]);\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Sleet Storm","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"rojoxol72kdbsljv","command":"({\r\n\tname: \"Sacred Flame\",\r\n\tid: \"rojoxol72kdbsljv\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.evocation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xFFA500 })\r\n\t.waitUntilFinished(-500);\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.disintegrate.orangepink\")\r\n\t\t.atLocation({ x: target.center.x, y: target.center.y - (canvas.grid.size * 2) })\r\n\t\t.stretchTo(target)\r\n\t\t.waitUntilFinished(-500);\r\n\r\n\tSequencerHelpers.Glow(sequence, target);\r\n\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.flames.01.orange\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.waitUntilFinished();\r\n}\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Sacred Flame","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"rt2vnep2l7j193gk","command":"({\r\n\tname: \"Sonic Scream\",\r\n\tid: \"rt2vnep2l7j193gk\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nfor (const target of targets) {\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.side_impact.part.shockwave.blue\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.reachTowards(target)\r\n\t\t.randomOffset()\r\n\t\t.repeats(5, 90, 120);\r\n\tawait sequence.play();\r\n}\r\n\r\nawait canvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", [template.data._id]);\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Sonic Scream","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"rt45hz8k6xrqcpz3","command":"({\r\n\tname: \"Compelled Duel\",\r\n\tid: \"rt45hz8k6xrqcpz3\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.outpulse.circle.02.normal\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xadadad })\r\n\t.belowTokens();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.enchantment\")\r\n\t.atLocation(casterToken)\r\n\t.duration(3700)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scaleToObject(2)\r\n\t.waitUntilFinished(-3500)\r\n\t.filter(\"Glow\", { color: 0xadadad });\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.003.blue\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.inpulse.circle.02.normal\")\r\n\t\t.atLocation(target)\r\n\t\t.duration(3500)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.filter(\"Glow\", { color: 0xadadad })\r\n\t\t.belowTokens();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.enchantment\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.scaleIn(0, 300, { ease: \"easeOutCubic\" })\r\n\t\t.scaleToObject(2)\r\n\t\t.duration(3500)\r\n\t\t.fadeOut(500)\r\n\t\t.filter(\"Glow\", { color: 0xadadad })\r\n\t\t.scaleIn(0, 300, { ease: \"easeOutCubic\" });\r\n}\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Compelled Duel","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"ry1ueii1xjc83o19","command":"({\r\n\tname: \"Blink\",\r\n\tid: \"ry1ueii1xjc83o19\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.transmutation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.opacity(0.3)\r\n\t.filter(\"Glow\", { color: 0xffffff })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200)\r\n\t.waitUntilFinished(-500);\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Blink","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"s7qkn74gj0iwsxhs","command":"({\r\n\tname: \"Spike Growth Alt\",\r\n\tid: \"s7qkn74gj0iwsxhs\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\n//Preloading the Files to make sure they play a bit nicer when animatiing.\r\nawait Sequencer.Preloader.preloadForClients(\r\n\t[\"jb2a.extras.tmfx.runes.circle.inpulse.transmutation\",\r\n\t\t\"jb2a.arms_of_hadar.dark_green\"\r\n\t], false);\r\n\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\n//get the template id from the canvas and its positions.\r\nlet fireTemplate = canvas.templates.get(args[0].templateId);\r\nlet templatePosition = fireTemplate.position;\r\n//get an array of the targets within the tempalte area.\r\nconst targetLocations = Array.from(game.user.targets);\r\n\r\nawait fireTemplate.document.delete();\r\n\r\nlet sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.transmutation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0x6a0dad })\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.arms_of_hadar.dark_green\")\r\n\t.atLocation(templatePosition)\r\n\t.scale(1.85)\r\n\t.fadeIn(300)\r\n\t.duration(10000)\r\n\t.fadeOut(500)\r\n\t.belowTokens()\r\n\t.opacity(0.5);\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Spike Growth Alt","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"s8ivpxkt19t83050","command":"({\r\n\tname: \"Cold Dagger\",\r\n\tid: \"s8ivpxkt19t83050\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nawait Sequencer.Preloader.preloadForClients(\r\n\t[\"jb2a.ice_spikes.radial.burst.blue\",\r\n\t\t\"jb2a.dagger.melee.02.blue\",\r\n\t\t\"jb2a.side_impact.ice_shard.blue\"\r\n\t], false);\r\n\r\n//This uses MIDI QOL to check for Hits before playing certain parts\r\n\r\nlet target = canvas.tokens.get(args[0].targets[0].id);\r\n//midi checking for hit.\r\nlet targetHit = args[0].hitTargets.length === 1;\r\n\r\nconst sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.dagger.melee.02.blue\")\r\n\t.atLocation(casterToken)\r\n\t.stretchTo(target)\r\n\t.filter(\"Glow\", { color: 0x0047AB })\r\n\t.waitUntilFinished(-1500)\r\n\t.missed(args[0].hitTargets.length === 0);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.ice_spikes.radial.burst.blue\")\r\n\t.atLocation(target)\r\n\t.scaleToObject()\r\n\t.fadeIn(500)\r\n\t.fadeOut(300)\r\n\t.playIf(targetHit);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.side_impact.ice_shard.blue\")\r\n\t.atLocation(target)\r\n\t.rotateTowards(target)\r\n\t.stretchTo(casterToken)\r\n\t.rotate(180)\r\n\r\n\t.playIf(targetHit);\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Cold Dagger","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"sg9kmig2cgjc2gqu","command":"({\r\n\tname: \"Faerie Fire Persist\",\r\n\tid: \"sg9kmig2cgjc2gqu\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\n\r\nconst casterToken = arguments[0].token;\r\nconsole.log(arguments);\r\nconsole.log(args);\r\n\r\n// If source token is not present, then we should have a second set of options where tokenUuid is visible\r\nlet target = args[1].sourceToken;\r\nif (!target) {\r\n\ttarget = await fromUuid(args[1].tokenUuid);\r\n}\r\n\r\nif(args[0] === \"on\") {\r\n\tconst sequence = new Sequence(); \r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.007.blue\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.delay(2000);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(4000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.waitUntilFinished(-2000)\r\n\t\t.filter(\"Glow\", { color: 0x7D87BF });\r\n\t\t\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.delay(2000)\r\n\t\t.file(\"jb2a.markers.light.loop.blue\")\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.4, 0.45)\r\n\t\t.attachTo(target)\r\n\t\t.randomRotation()\r\n\t\t.scaleIn(0, 500, {ease: \"easeOutCubic\"})\r\n\t\t.persist()\r\n\t\t.name(`faerie-fire-${targetID.id}`);\r\n\t\t\t\r\n\ttarget.document.update({ light: { bright : 0, dim: 10, color : '#a5d5f3', alpha: 0.5, angle: 360, animation:{ type: \"pulse\", speed: 5, intensity: 5}}});\r\n\r\n\tawait sequence.play();\r\n}\r\n\r\nelse if (args[0] === \"off\") {\r\n\tSequencer.EffectManager.endEffects({ name: `faerie-fire-${casterToken.id}`, object: casterToken });\r\n\tcasterToken.document.update({ light:{ bright : 0, dim: 0, color : '#000000', alpha: 0.5, angle: 360, animation:{ type: \"pulse\", speed: 5, intensity: 5}}});\r\n}","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Faerie Fire Persist","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"t4qyllttaaa8v2f9","command":"({\r\n\tname: \"Hunger Of Hadar\",\r\n\tid: \"t4qyllttaaa8v2f9\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nconst template = canvas.templates.placeables[canvas.templates.placeables.length-1];\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.02.dark_bluewhite\")\r\n\t.delay(200)\r\n\t.fadeIn(300)\r\n\t.fadeOut(1000)\r\n\t.scaleToObject(3)\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(3500)\r\n\t.opacity(0.5);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.01.dark_bluewhite\")\r\n\t.delay(200)\r\n\t.fadeIn(300)\r\n\t.fadeOut(500)\r\n\t.scaleToObject(2)\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(3500)\r\n\t.belowTokens()\r\n\t.animateProperty(\"sprite\", \"rotation\", { from: 0, to: 360, duration: 4000, ease: \"easeInOutCubic\"});\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.simple.evocation\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(1500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.4)\r\n\t.opacity(1)\r\n\t.waitUntilFinished(1000)\r\n\t.filter(\"Glow\", { color: 0x00008b});    \r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.sleet_storm.purple\")\r\n\t.atLocation(template.position)\r\n\t.scaleToObject(9.5)\r\n\t.scaleIn(0, 7000, {ease: \"easeOutCubic\", delay: 100})\r\n\t.fadeIn(300)\r\n\t.persist()\r\n\t.scaleOut(0, 7000, {ease: \"easeOutCubic\", delay: 100})\r\n\t.fadeOut(4000)\r\n\t.name(`hunger-of-hadar-part-1${template.id}`)\r\n\t.opacity(0.8)\r\n\t.belowTokens();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.darkness.black\")\r\n\t.atLocation(template.position)\r\n\t.scaleIn(0, 1000, {ease: \"easeOutCubic\", delay: 100})\r\n\t.fadeIn(300)\r\n\t.scaleOut(0, 4000, {ease: \"easeOutCubic\", delay: 100})\r\n\t.fadeOut(4000)\r\n\t.persist()\r\n\t.name(`hunger-of-hadar-part-2${template.id}`)\r\n\t.opacity(0.8)\r\n\t.scaleToObject(9);\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Hunger Of Hadar","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"t4s3k32cr6d16hz8","command":"({\r\n\tname: \"Frightful Presence\",\r\n\tid: \"t4s3k32cr6d16hz8\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nlet target = Array.from(game.user.targets)[0];\r\n\r\n//To do - checking for if target saves or not.\r\n//let targetSave = args[0].saves.length === 1;\r\n\r\nconst sequence = new Sequence();\r\n\r\nsequence\r\n\t.sound()\r\n\t.file(\"/worlds/doip/sounds/dragonroar.mp3\");\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.inpulse.circle.03\")\r\n\t.atLocation(casterToken)\r\n\t.filter(\"Glow\", { color: 0xFFC300 })\r\n\t.duration(2000)\r\n\t.scale(1)\r\n\t.belowTokens()\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.energy_strands.complete.orange.01\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(300)\r\n\t.scale(1)\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.icon.fear.orange\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(300)\r\n\t.scaleToObject()\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.fear.orange.02\")\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.atLocation(target)\r\n\t.persist();\r\n//   .playIf(targetSave)\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Frightful Presence","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"tpkprbc1ojg6s6gd","command":"({\r\n\tname: \"Zone Of Truth\",\r\n\tid: \"tpkprbc1ojg6s6gd\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.enchantment\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xa1c4fd })\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.light.intro.blue\")\r\n\t.duration(1500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.7);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.border.circle.outpulse.01.normal\")\r\n\t.attachTo(casterToken)\r\n\t.fadeIn(500)\r\n\t.filter(\"Glow\", { color: 0xa1c4fd })\r\n\t.fadeOut(500)\r\n\t.scale(1.25)\r\n\t.opacity(0.3)\r\n\t.belowTokens()\r\n\t.persist();\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Zone Of Truth","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"tskdl1e2uyh685cj","command":"({\r\n\tname: \"Dispel Magic\",\r\n\tid: \"tskdl1e2uyh685cj\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nconst casterToken = canvas.tokens.get(args[0].tokenId);\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.abjuration\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1700)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xffffff })\r\n\t.scaleIn(0, 500, {ease: \"easeOutCubic\", delay: 100});\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.rainbow\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200)\r\n\t.waitUntilFinished(-500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.detect_magic.circle.grey\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.duration(2500)\r\n\t.randomRotation(); \r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Dispel Magic","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"u1izlvn7n16nvox5","command":"({\r\n\tname: \"Jump\",\r\n\tid: \"u1izlvn7n16nvox5\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.transmutation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-1000)\r\n\t.filter(\"Glow\", { color: 0xadd8e6 });\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.004.dark_purple\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(200);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.markers.light.loop.blue\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(200)\r\n\t\t.belowTokens()\r\n\t\t.scaleToObject(1.5)\r\n\t\t.animateProperty(\"spriteContainer\", \"rotation\", { from: 0, to: 360, duration: 5000, delay: 0 });\r\n}\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Jump","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"u272x9iis93ohjhs","command":"({\r\n\tname: \"Beast Bond\",\r\n\tid: \"u272x9iis93ohjhs\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.divination\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.opacity(0.3)\r\n\t.filter(\"Glow\", { color: 0x76d669 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.green\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200)\r\n\t.waitUntilFinished(-500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.particles.outward.greenyellow.01.02\")\r\n\t.scale(0.45)\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.duration(1500)\r\n\t.belowTokens();\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Beast Bond","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"u9kt683ve3ek713e","command":"({\r\n\tname: \"Ceremony\",\r\n\tid: \"u9kt683ve3ek713e\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.abjuration\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-500)\r\n\t.filter(\"Glow\", { color: 0xabcdef });\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.004.blue\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.energy_strands.complete.blueorange.01\")\r\n\t\t.fadeIn(1000)\r\n\t\t.duration(10000)\r\n\t\t.fadeOut(1000)\r\n\t\t.scaleToObject(1.5)\r\n\t\t.atLocation(target)\r\n\t\t.randomRotation();\r\n\tawait sequence.play();\r\n}\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Ceremony","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"udn7pwlg3gp5amfl","command":"({\r\n\tname: \"Unseen Servant\",\r\n\tid: \"udn7pwlg3gp5amfl\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nawait warpgate.spawn(\"Unseen Servant\", {}, {\r\n\tpre: async (location) => {\r\n\t\tconst seq = new Sequence();\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.conjuration\")\r\n\t\t\t.atLocation(casterToken)\r\n\t\t\t.duration(2000)\r\n\t\t\t.fadeIn(500)\r\n\t\t\t.fadeOut(500)\r\n\t\t\t.scale(0.5)\r\n\t\t\t.opacity(0.3)\r\n\t\t\t.filter(\"Glow\", { color: 0xa1c4fd })\r\n\t\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t\t\t.atLocation(casterToken)\r\n\t\t\t.fadeIn(100)\r\n\t\t\t.fadeOut(200)\r\n\t\t\t.duration(1200)\r\n\t\t\t.waitUntilFinished(-500);\r\n\t\tsequence\r\n\t\t\t.effect()\r\n\t\t\t.file(\"jb2a.toll_the_dead.blue.shockwave\")\r\n\t\t\t.atLocation(location)\r\n\t\t\t.fadeIn(500)\r\n\t\t\t.fadeOut(500)\r\n\t\t\t.scale(0.5)\r\n\t\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 })\r\n\t\t\t.filter(\"Glow\", { color: 0xa1c4fd });\r\n\r\n\t\tawait sequence.play();\r\n\r\n\t\t// Sleep for 500ms\r\n\t\tawait (new Promise(resolve => setTimeout(resolve, 1200)));\r\n\t}\r\n}, {\r\n\tcollision: false\r\n});\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Unseen Servant","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"v093uueggmentix6","command":"({\r\n\tname: \"Spike Growth\",\r\n\tid: \"v093uueggmentix6\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nconst template = canvas.templates.placeables[canvas.templates.placeables.length-1];\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.02.greenorange\")\r\n\t.delay(200)\r\n\t.fadeIn(300)\r\n\t.fadeOut(1000)\r\n\t.scaleToObject(3)\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(1500)\r\n\t.opacity(0.5);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.drop.dark_green.01\")\r\n\t.fadeIn(300)\r\n\t.fadeOut(1000)\r\n\t.scaleToObject(3)\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(2900)\r\n\t.opacity(0.5)\r\n\t.file(\"jb2a.markers.01.greenorange\")\r\n\t.delay(200)\r\n\t.fadeIn(300)\r\n\t.fadeOut(500)\r\n\t.scaleToObject(2)\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(1500)\r\n\t.belowTokens()\r\n\t.animateProperty(\"sprite\", \"rotation\", { from: 0, to: 360, duration: 4000, ease: \"easeInOutCubic\"});\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.simple.transmutation\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(1500)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.4)\r\n\t.opacity(1)\r\n\t.waitUntilFinished(-300)\r\n\t.filter(\"Glow\", { color: 0x00ff00});    \r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.template_circle.symbol.normal.drop.dark_green\")\r\n\t.atLocation(template.position)\r\n\t.fadeIn(1500)\r\n\t.persist()\r\n\t.fadeOut(1500)\r\n\t.name(`spike-growth-${template.id}`)\r\n\t.belowTokens();\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Spike Growth","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"v15vkquib1dr8ndx","command":"({\r\n\tname: \"Bane\",\r\n\tid: \"v15vkquib1dr8ndx\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\n\r\nconst casterToken = arguments[0].token;\r\nconsole.log(arguments);\r\nconsole.log(args);\r\n\r\n// If source token is not present, then we should have a second set of options where tokenUuid is visible\r\nlet target = args[1].sourceToken;\r\nif (!target) {\r\n\ttarget = await fromUuid(args[1].tokenUuid);\r\n}\r\n\r\n\r\nif(args[0] === \"on\") {\r\n\tconst sequence = new Sequence(); \r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.enchantment\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(4000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.waitUntilFinished(-2000)\r\n\t\t.filter(\"Glow\", { color: 0xf02d2b });\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.004.dark_red\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.delay(2000);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.delay(2000)\r\n\t\t.file(\"jb2a.energy_strands.overlay.dark_red.01\")\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.4, 0.45)\r\n\t\t.attachTo(target)\r\n\t\t.randomRotation()\r\n\t\t.scaleIn(0, 500, {ease: \"easeOutCubic\"})\r\n\t\t.persist()\r\n\t\t.name(`bane-${target.id}`);\r\n\r\n\tawait sequence.play();\r\n}\r\n\r\nelse if(args[0] === \"off\") {\r\n\tSequencer.EffectManager.endEffects({ name: `bane-${target.id}`, object: tar });\r\n} ","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Bane","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"v21c4y2p2h838dh2","command":"({\r\n    name: \"Dimension Door\",\r\n    id: \"v21c4y2p2h838dh2\",\r\n    spellType: \"range\"\r\n})\r\n// @endmeta\r\n// requires JB2A, Sequencer, and Warpgate\r\n//Credit to david (aka claudekennilol) for initial Pathfinder version and Tupsi for initial 5e version\r\n\r\nSequencer.Preloader.preloadForClients(\r\n    \"jb2a.magic_signs.circle.02.conjuration.intro.red\",\r\n    \"jb2a.portals.vertical.vortex.red\",\r\n    \"jb2a.magic_signs.circle.02.conjuration.intro.blue\",\r\n    \"jb2a.portals.vertical.vortex.blue\")\r\n\r\nlet tokenD = canvas.tokens.get(args[0].tokenId);\r\n\r\nif (!tokenD) {\r\n    ui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n    return;\r\n}\r\n\r\nconst config = {\r\n    drawIcon: false,\r\n    interval: tokenD.data.width % 2 === 0 ? 1 : -1,\r\n    label: 'Dimension Door',\r\n    size: tokenD.w / canvas.grid.size,\r\n}\r\nif (typeof item !== 'undefined') {\r\n    config.drawIcon = true;\r\n    config.icon = item.img;\r\n    config.label = item.name;\r\n}\r\n\r\nconst position = await warpgate.crosshairs.show(config);\r\n\r\nconst portalScale = tokenD.w / canvas.grid.size * .7;\r\n\r\nsequence\r\n\t.effect()\r\n    .file('jb2a.magic_signs.rune.conjuration.intro.red')\r\n    .atLocation(tokenD)\r\n    .scale(portalScale * .7)\r\n    .opacity(0.5)\r\n    .waitUntilFinished(-600);\r\n\r\nconst introSequence = new Sequence()\r\n\r\nsequence\r\n\t.effect()\r\n    .file('jb2a.magic_signs.circle.02.conjuration.intro.red')\r\n    .atLocation(tokenD)\r\n    .offset({ y: (tokenD.height) })\r\n    .scaleToObject(2)\r\n    .fadeIn(200)\r\n    .fadeOut(500)\r\n    .belowTokens()\r\n    .waitUntilFinished(-1000);\r\n\r\nsequence\r\n\t.effect()\r\n    .file('jb2a.portals.vertical.vortex.red')\r\n    .atLocation(tokenD)\r\n    .offset({ y: (tokenD.height) })\r\n    .scale(portalScale)\r\n    .duration(1500)\r\n    .fadeIn(200)\r\n    .fadeOut(500);\r\n\r\nintroSequence.animation()\r\n    .on(tokenD)\r\n    .opacity(0);\r\n\r\nsequence\r\n\t.effect()\r\n    .from(tokenD)\r\n    .moveTowards({ x: tokenD.center.x, y: tokenD.center.y - tokenD.h })\r\n    .zeroSpriteRotation()\r\n    .fadeOut(500)\r\n    .duration(500);\r\n\r\nintroSequence.wait(250);\r\n\r\nconst outroSequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n    .file('jb2a.magic_signs.circle.02.conjuration.intro.blue')\r\n    .atLocation(position)\r\n    .scaleToObject(2)\r\n    .offset({ y: (tokenD.height) })\r\n    .fadeIn(200)\r\n    .fadeOut(500)\r\n    .belowTokens()\r\n    .waitUntilFinished(-1000);\r\n\r\nsequence\r\n\t.effect()\r\n    .file('jb2a.portals.vertical.vortex.blue')\r\n    .atLocation(position)\r\n    .offset({ y: (tokenD.height) })\r\n    .scale(portalScale)\r\n    .duration(1200)\r\n    .fadeOut(500)\r\n    .fadeIn(200);\r\n\r\nsequence\r\n\t.effect()\r\n    .from(tokenD)\r\n    .atLocation({ x: position.x, y: position.y - tokenD.h })\r\n    .fadeIn(500)\r\n    .duration(1500)\r\n    .moveTowards(position)\r\n    .zeroSpriteRotation()\r\n    .waitUntilFinished();\r\n\r\noutroSequence.animation()\r\n    .on(tokenD)\r\n    .teleportTo(position, { relativeToCenter: true })\r\n    .opacity(1);\r\n\r\nawait sequence.play()\r\nawait sequence.play()\r\nawait sequence.play()\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Dimension Door","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"vau9ptxe2drlcsup","command":"({\r\n\tname: \"Cure Wounds\",\r\n\tid: \"vau9ptxe2drlcsup\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.simple.evocation\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.scaleIn(0, 300, { ease: \"easeOutCubic\" })\r\n\t.scaleToObject(4)\r\n\t.duration(1000)\r\n\t.fadeOut(500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.cure_wounds.400px.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scaleToObject(3)\r\n\t.duration(1500)\r\n\t.waitUntilFinished(-1000);\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.003.blue\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.healing_generic.loop.bluewhite\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scaleToObject(3)\r\n\t\t.belowTokens()\r\n\t\t.opacity(0.5);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.healing_generic.burst.bluewhite\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scaleToObject(3)\r\n\t\t.opacity(0.5);\r\n}\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Cure Wounds","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"vcze7e18bbsat5pq","command":"({\r\n\tname: \"Shadow Of Moil Attack\",\r\n\tid: \"vcze7e18bbsat5pq\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nawait Sequencer.Preloader.preloadForClients([\r\n\t\"jb2a.energy_strands.complete.dark_red.01\",\r\n\t\"jb2a.energy_strands.range.standard.dark_red.01\"\r\n], false);\r\n\r\n// remove the damage from the Shadow of Moil Chat Card, Create a new item and add the damage to it then apply the attack macro to that\r\n\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nlet target = Array.from(game.user.targets)[0];\r\n//Delete the comment on this line, formatting breaks the layout\r\n//let damageTotal = game.modules.get(\"midi-qol\").damageRoll ?.total ?? 16;\r\n\r\nconst sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.energy_strands.complete.dark_red.01\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scaleToObject();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.energy_strands.range.standard.dark_red.01\")\r\n\t.repeats(Math.max(1, Math.floor(damageTotal / 2)), 100, 200)\r\n\t.randomizeMirrorY()\r\n\t.atLocation(target)\r\n\t.stretchTo(casterToken)\r\n\t.playIf(args[0].hitTargets.length === 1); // Comment this line out if not using MIDI\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Shadow Of Moil Attack","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"vq4ruar4i6qb07oy","command":"({\r\n\tname: \"Fire Bolt\",\r\n\tid: \"vq4ruar4i6qb07oy\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.opacity(0.8)\r\n\t.filter(\"Glow\", { color: 0xffa500 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.smoke.puff.centered.dark_black\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.randomRotation();\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.fire_bolt.orange\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.stretchTo(target);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.009.orange\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.delay(1000)\r\n\t\t.scaleToObject();\r\n}\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Fire Bolt","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"vu2x1nj095mu1ikk","command":"({\r\n\tname: \"Create Or Destroy Water\",\r\n\tid: \"vu2x1nj095mu1ikk\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.markers.bubble.outro.blue\")\r\n\t.scaleToObject(2)\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.belowTokens();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.transmutation\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(2800)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xadd8e6 })\r\n\t.opacity(0.8);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.outpulse.circle.02.normal\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(2800)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xadd8e6 })\r\n\t.opacity(0.8);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.liquid.splash.blue\")\r\n\t.atLocation(args[0].tokenId)\r\n\t.duration(2800)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scaleToObject(3)\r\n\t.opacity(0.8)\r\n\t.belowTokens();\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Create Or Destroy Water","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"vy8lv6xzslnhs2r0","command":"({\r\n\tname: \"Action Surge\",\r\n\tid: \"vy8lv6xzslnhs2r0\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.explosion.02.yellow\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.randomRotation();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.divine_smite.caster.yellowwhite\")\r\n\t.fadeIn(100)\r\n\t.fadeOut(100)\r\n\t.atLocation(casterToken)\r\n\t.randomRotation();\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Action Surge","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"vzlgr2qt7vup3ays","command":"({\r\n\tname: \"Protection From Good And Evil\",\r\n\tid: \"vzlgr2qt7vup3ays\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\nconst casterToken = arguments[0].token;\r\nconsole.log(arguments);\r\nconsole.log(args);\r\n\r\n// If source token is not present, then we should have a second set of options where tokenUuid is visible\r\nlet target = args[1].sourceToken;\r\nif (!target) {\r\n\ttarget = await fromUuid(args[1].tokenUuid);\r\n}\r\n\r\n\r\nif(args[0] === \"on\") {\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.abjuration\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(2000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.opacity(0.3)\r\n\t\t.filter(\"Glow\", { color: 0xf9e076 })\r\n\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.markers.light.intro.yellow\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(200)\r\n\t\t.scaleToObject(2)\r\n\t\t.waitUntilFinished(-500);\r\n\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.magic_signs.circle.02.abjuration.intro.yellow\")\r\n\t\t.attachTo(target)\r\n\t\t.scaleToObject(1.5)\r\n\t\t.waitUntilFinished(-500)\r\n\t\t.belowTokens();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.magic_signs.circle.02.abjuration.loop.yellow\")\r\n\t\t.attachTo(target)\r\n\t\t.scaleToObject(1.5)\r\n\t\t.persist()\r\n\t\t.name(`protection-from-good-and-evil-${target.id}`)\r\n\t\t.fadeIn(300)\r\n\t\t.fadeOut(300)\r\n\t\t.extraEndDuration(800)\r\n\t\t.belowTokens();\r\n\t\t\t\r\n\tawait sequence.play();\r\n}\r\n\r\nelse if(args[0] === \"off\") {\r\n\tSequencer.EffectManager.endEffects({ name: `protection-from-good-and-evil-${casterToken.id}`, object: casterToken });\r\n\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.magic_signs.circle.02.abjuration.outro.yellow\")\r\n\t\t.scaleToObject(1.5)\r\n\t\t.attachTo(casterToken)\r\n\t\t.belowTokens();\r\n\tawait sequence.play();\r\n}\r\n\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Protection From Good And Evil","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"w9xmvz697vd201vi","command":"({\r\n\tname: \"Shield\",\r\n\tid: \"w9xmvz697vd201vi\",\r\n\tspellType: \"aefx\"\r\n});\r\n// @endmeta\r\n\r\nconst casterToken = arguments[0].token;\r\n\r\nif(args[0] === \"on\"){\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.abjuration\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.duration(2000)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.scale(0.5)\r\n\t\t.opacity(0.3)\r\n\t\t.filter(\"Glow\", { color: 0xffffff })\r\n\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t\t.atLocation(casterToken)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(200)\r\n\t\t.duration(1200)\r\n\t\t.waitUntilFinished(-500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.shield.01.intro.blue\")\r\n\t\t.attachTo(casterToken)\r\n\t\t.scale(0.5)\r\n\t\t.waitUntilFinished(-500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.shield.01.loop.blue\")\r\n\t\t.attachTo(casterToken)\r\n\t\t.scale(0.5)\r\n\t\t.persist()\r\n\t\t.name(`Shield-${casterToken.id}`)\r\n\t\t.fadeIn(300)\r\n\t\t.fadeOut(300)\r\n\t\t.extraEndDuration(800);\r\n\tawait sequence.play();\r\n}\r\n\r\nif(args[0] === \"off\"){\r\n\t// If the dynamic active effect ended\r\n\tSequencer.EffectManager.endEffects({ name: `Shield-${casterToken.id}`, object: casterToken });\r\n\r\n\tconst sequence = new Sequence();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.shield.01.outro_explode.blue\")\r\n\t\t.scale(0.5)\r\n\t\t.attachTo(casterToken);\r\n\tawait sequence.play();\r\n}\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Shield","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"wqycefztbplutm4n","command":"({\r\n\tname: \"Armor Of Agathys\",\r\n\tid: \"wqycefztbplutm4n\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.abjuration\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.opacity(0.3)\r\n\t.filter(\"Glow\", { color: 0xffffff })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200)\r\n\t.waitUntilFinished(-500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.ice_spikes.radial.burst.white\")\r\n\t.scale(0.45)\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.duration(1500)\r\n\t.belowTokens();\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Armor Of Agathys","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"wuot9906uprkbj82","command":"({\r\n\tname: \"Tasha's Caustic Brew\",\r\n\tid: \"wuot9906uprkbj82\",\r\n\tspellType: \"templates\"\r\n});\r\n// @endmeta\r\n\r\n// Templates work a little differently.\r\n\r\nconst casterToken = args[1].sourceToken;\r\nlet targets = canvas.tokens.placeables.filter(x => x.isTargeted);\r\nconst template = args[1].templateData.data;\r\nconst getRayEndPos = ({x, y, distance, direction}) => {\r\n\tconst scale = game.scenes.current.dimensions;\r\n    \r\n\tconst radians = direction * (Math.PI / 180);\r\n\tconst newX = Math.cos(radians) * distance * (scale.size / scale.distance);\r\n\tconst newY = Math.sin(radians) * distance * (scale.size / scale.distance);\r\n\treturn { x: newX + x, y: newY + y };\r\n};\r\n\r\nconst templateEndPos = getRayEndPos(template);\r\n\r\nconst sequence = new Sequence();\r\nsequence.effect()\r\n\t.file('jb2a.breath_weapons.acid.line.green')\r\n\t.atLocation({ x: template.x, y: template.y})\r\n\t.stretchTo(templateEndPos)\r\n\t.fadeOut(200);\r\n\r\nawait sequence.play();\r\n\r\nawait canvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", [template.data._id]);","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Tasha's Caustic Brew","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"x6gyxlv4trm7vwkk","command":"({\r\n\tname: \"Chill Touch\",\r\n\tid: \"x6gyxlv4trm7vwkk\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.energy_strands.overlay.purple.01\")\r\n\t.delay(200)\r\n\t.fadeIn(300)\r\n\t.fadeOut(500)\r\n\t.duration(3000)\r\n\t.scale(0.4)\r\n\t.atLocation(casterToken)\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\" });\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.necromancy\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-2000)\r\n\t.filter(\"Glow\", { color: 0x800080 });\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(200)\r\n\t\t.duration(1200)\r\n\t\t.belowTokens()\r\n\t\t.waitUntilFinished(-500);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.delay(500)\r\n\t\t.file(\"jb2a.impact.007.purple\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(200);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.arcane_hand.purple\")\r\n\t\t.scale(0.3)\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.duration(1500)\r\n\t\t.opacity(0.5);\r\n}\r\nawait sequence.play();\r\n\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Chill Touch","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"yehxruwtjoh8itb0","command":"({\r\n\tname: \"Spare The Dying\",\r\n\tid: \"yehxruwtjoh8itb0\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.simple.necromancy\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.scaleIn(0, 300, { ease: \"easeOutCubic\" })\r\n\t.scaleToObject(4)\r\n\t.duration(1000)\r\n\t.fadeOut(500)\r\n\t.filter(\"Glow\", { color: 0xFFFFA7 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.cure_wounds.200px.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scaleToObject(3)\r\n\t.duration(1500)\r\n\t.waitUntilFinished(-800);\r\n\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.extras.tmfx.outpulse.circle.01.slow\")\r\n\t\t.atLocation(target)\r\n\t\t.filter(\"Glow\", { color: 0xFFFFA7 })\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(500)\r\n\t\t.scaleToObject(5)\r\n\t\t.belowTokens();\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.impact.004.yellow\")\r\n\t\t.atLocation(target);\r\n}\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Spare The Dying","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"yiox131znwaep8pj","command":"({\r\n\tname: \"Detect Poison\",\r\n\tid: \"yiox131znwaep8pj\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.divination\")\r\n\t.atLocation(casterToken)\r\n\t.duration(1700)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0x89F423 })\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\", delay: 100 });\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(100)\r\n\t.fadeOut(200)\r\n\t.duration(1200)\r\n\t.waitUntilFinished(-500);\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.detect_magic.circle.green\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.duration(2500)\r\n\t.randomRotation();\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Detect Poison","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"yjqwspfem8pj6s07","command":"({\r\n\tname: \"Fireball Alt\",\r\n\tid: \"yjqwspfem8pj6s07\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\n//get the template id from the canvas and its positions.\r\nconst templatePosition = canvas.templates.placeables[canvas.templates.placeables.length - 1];\r\n//get an array of the targets within the tempalte area.\r\nconst targetLocations = Array.from(game.user.targets);\r\n\r\nlet sequence = new Sequence();\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.inpulse.evocation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.filter(\"Glow\", { color: 0xffa500 })\r\n\t.waitUntilFinished(-500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.fireball.beam.orange\")\r\n\t.atLocation(casterToken)\r\n\t.stretchTo(templatePosition)\r\n\t.waitUntilFinished(-1800);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.fireball.explosion.orange\")\r\n\t.atLocation(templatePosition)\r\n\t.waitUntilFinished(-2100);\r\n\r\n//blast mark from the forgotten adventures site, you need to find your own blast mark or use the agreed one by JB2A and FA\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.ground_cracks.orange.01\")\r\n\t.atLocation(templatePosition)\r\n\t.fadeIn(300)\r\n\t.duration(10000)\r\n\t.fadeOut(350)\r\n\t.name(`fireball-impact-${templatePosition.data._id}`)\r\n\t.belowTokens();\r\n\r\n//loop through targets and play only if failed save (to do)\r\nfor (let targetLoc of targetLocations) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.flames.01.orange\")\r\n\t\t.filter(\"Glow\", { color: 0xffa700 })\r\n\t\t.atLocation(targetLoc)\r\n\t\t.fadeIn(500)\r\n\t\t.fadeOut(500)\r\n\t\t.duration(2000);\r\n}\r\nsequence.thenDo(() => canvas.scene.deleteEmbeddedDocuments(\"MeasuredTemplate\", [templatePosition.data._id]));\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Fireball Alt","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"yyebo46gis2iuzz7","command":"({\r\n\tname: \"Dancing Lights\",\r\n\tid: \"yyebo46gis2iuzz7\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\n\r\nconst createDancingLight = async () => {\r\n\tif (typeof dancingLightCount !== \"number\" || dancingLightCount <= 0)\r\n\t\treturn;\r\n\r\n\tawait warpgate.spawn(\"Dancing Light\", {}, {\r\n\t\tpre: async (location, updates) => {\r\n\t\t\t// When the user has clicked where they want it\r\n\r\n\t\t\tif (!hasPlayedAnimation) {\r\n\t\t\t\thasPlayedAnimation = true;\r\n\t\t\t\tnew Sequence()\r\n\t\t\t\t\t.effect()\r\n\t\t\t\t\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.evocation\")\r\n\t\t\t\t\t.atLocation(casterToken)\r\n\t\t\t\t\t.duration(2000)\r\n\t\t\t\t\t.fadeIn(500)\r\n\t\t\t\t\t.fadeOut(500)\r\n\t\t\t\t\t.scale(0.5)\r\n\t\t\t\t\t.filter(\"Glow\", { color: 0xffffbf })\r\n\t\t\t\t\t.scaleIn(0, 500, {ease: \"easeOutCubic\", delay: 100})\r\n\t\t\t\t\t.effect()\r\n\t\t\t\t\t.file(\"jb2a.moonbeam.01.intro.blue\")\r\n\t\t\t\t\t.atLocation(casterToken)\r\n\t\t\t\t\t.fadeIn(100)\r\n\t\t\t\t\t.fadeOut(200)\r\n\t\t\t\t\t.duration(1200)\r\n\t\t\t\t\t.play();\r\n\t\t\t}\r\n\t\t},\r\n\t\tpost: async (location, spawnedToken, updates, iteration) => {\r\n\t\t\t// When the token has been spawned\r\n\r\n\t\t\tnew Sequence()\r\n\t\t\t\t.effect()\r\n\t\t\t\t.file(\"jb2a.toll_the_dead.blue.shockwave\")\r\n\t\t\t\t.atLocation(location)\r\n\t\t\t\t.fadeOut(500)\r\n\t\t\t\t.randomRotation()\r\n\t\t\t\t.scale(0.5)\r\n\t\t\t\t.play();\r\n\r\n\r\n\t\t\tif (++currentDancingLightCount < dancingLightCount) {\r\n\t\t\t\tawait createDancingLight();\r\n\t\t\t}\r\n\t\t}\r\n\t}, {\r\n\t\tcontrollingActor: casterToken.actor,\r\n\t\tcollision: false,\r\n\t});\r\n};\r\n\r\nnew Dialog({\r\n\ttitle: \"Dancing Lights\", content: `\r\n        <div class=\"form-group\">\r\n            <label>Dancing Light Count: <span id=\"dancing-light-count\">4</span></label>\r\n            <input type=\"range\" id=\"dancing-light-range\" value=\"4\" min=\"1\" max=\"4\" oninput=\"$('#dancing-light-count').html(this.value)\"/>\r\n        </div>\r\n    `, buttons: {\r\n\t\tone: {\r\n\t\t\tlabel: \"Done\", callback: (html) => {\r\n\t\t\t\tdancingLightCount = parseInt(html.find(\"#dancing-light-range\").val().toString());\r\n\t\t\t\tcreateDancingLight();\r\n\t\t\t}\r\n\t\t}\r\n\t}, default: \"one\"\r\n}).render(true);\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Dancing Lights","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"z51wwj3wk6n7ws8w","command":"({\r\n\tname: \"Slow Start\",\r\n\tid: \"z51wwj3wk6n7ws8w\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.transmutation\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-2000)\r\n\t.filter(\"Glow\", { color: 0x6a0dad });\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Slow Start","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"zuwxmkjff8sdwwv2","command":"({\r\n\tname: \"Charm Person\",\r\n\tid: \"zuwxmkjff8sdwwv2\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\nconst targets = workflow.targets;\r\nif (targets.size === 0) {\r\n\tui.notifications.warn(\"Please target at least one token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.enchantment\")\r\n\t.atLocation(casterToken)\r\n\t.duration(4000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-2000)\r\n\t.filter(\"Glow\", { color: 0xfadadd });\r\nfor (const target of targets) {\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.moonbeam.01.intro.rainbow\")\r\n\t\t.atLocation(target)\r\n\t\t.fadeIn(100)\r\n\t\t.fadeOut(200)\r\n\t\t.duration(1200);\r\n\tsequence\r\n\t\t.effect()\r\n\t\t.file(\"jb2a.energy_strands.overlay.pinkyellow.01\")\r\n\t\t.delay(200)\r\n\t\t.fadeIn(300)\r\n\t\t.fadeOut(500)\r\n\t\t.duration(3000)\r\n\t\t.scale(0.4)\r\n\t\t.opacity(0.4)\r\n\t\t.atLocation(target)\r\n\t\t.scaleIn(0, 500, { ease: \"easeOutCubic\" });\r\n}\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Charm Person","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
{"_id":"zvfmmy22qikge0ce","command":"({\r\n\tname: \"Counterspell\",\r\n\tid: \"zvfmmy22qikge0ce\",\r\n\tspellType: \"range\"\r\n});\r\n// @endmeta\r\nlet workflow = arguments[0].args[0];\r\nconsole.log(arguments);\r\nconsole.log(workflow);\r\n\r\nlet casterToken;\r\n\r\n// Workflow will be a string of on/off for DAE effects\r\nif (typeof workflow === 'string') {\r\n\tcasterToken = arguments[0].token;\r\n} else {\r\n\tcasterToken = canvas.tokens.get(workflow.tokenId);\r\n}\r\n\r\nif (!casterToken) {\r\n\tui.notifications.warn(\"Please select a valid token to use this ability.\");\r\n\treturn;\r\n}\r\n\r\n\r\nconst sequence = new Sequence();\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.extras.tmfx.runes.circle.outpulse.abjuration\")\r\n\t.atLocation(casterToken)\r\n\t.duration(2000)\r\n\t.fadeIn(500)\r\n\t.fadeOut(500)\r\n\t.scale(0.5)\r\n\t.waitUntilFinished(-1000)\r\n\t.filter(\"Glow\", { color: 0xffffbf });\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.impact.blue.10\")\r\n\t.atLocation(casterToken)\r\n\t.fadeIn(500);\r\n\r\nsequence\r\n\t.effect()\r\n\t.file(\"jb2a.energy_strands.overlay.pinkyellow.01\")\r\n\t.delay(200)\r\n\t.fadeIn(300)\r\n\t.fadeOut(500)\r\n\t.duration(2000)\r\n\t.scale(0.4)\r\n\t.opacity(0.4)\r\n\t.atLocation(casterToken)\r\n\t.scaleIn(0, 500, { ease: \"easeOutCubic\" });\r\n\r\nawait sequence.play();\r\n","flags":{"advanced-macros":{"runAsGM":false}},"folder":null,"img":"icons/svg/dice-target.svg","name":"Counterspell","permission":{"default":0},"scope":"global","sort":0,"type":"script"}
